# This file is generated by quick.py. Do not edit.
# Run q quick rebuild to regenerate.

if [[ -z "${_REDSHELL_GEN_QUICK}" || -n "${_REDSHELL_RELOAD}" ]]; then
_REDSHELL_GEN_QUICK=1
function __q() {
  if [ "$#" -eq 0 ]; then
    __q_help
    return 0
  fi
  case "$1" in
  help|-h|--help|?)
    shift
    __q_help "$@"
    ;;
  dump)
    shift
    __q_dump "$@"
    ;;
  ascii_art)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "ascii_art" "$@"
      ;;
    print_speech_bubble)
      shift
      print_speech_bubble "$@"
      ;;
    erase_lines)
      shift
      erase_lines "$@"
      ;;
    cursor_position)
      shift
      cursor_position "$@"
      ;;
    cursor_row)
      shift
      cursor_row "$@"
      ;;
    print_bmo)
      shift
      print_bmo "$@"
      ;;
    print_pedro)
      shift
      print_pedro "$@"
      ;;
    scroll_output_pedro)
      shift
      scroll_output_pedro "$@"
      ;;
    select_visual)
      shift
      select_visual "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module ascii_art has no function $1"
      fi
      __q_help ascii_art
      return 1
      ;;
    esac
    ;;
  bash)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "bash" "$@"
      ;;
    get_bash_functions)
      shift
      get_bash_functions "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module bash has no function $1"
      fi
      __q_help bash
      return 1
      ;;
    esac
    ;;
  browser)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "browser" "$@"
      ;;
    gdocs_id)
      shift
      gdocs_id "$@"
      ;;
    sheets_dl_link)
      shift
      sheets_dl_link "$@"
      ;;
    chrome_path)
      shift
      chrome_path "$@"
      ;;
    downloads_path)
      shift
      downloads_path "$@"
      ;;
    browser_dl|dl)
      shift
      browser_dl "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module browser has no function $1"
      fi
      __q_help browser
      return 1
      ;;
    esac
    ;;
  caldav)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "caldav" "$@"
      ;;
    caldav_accounts|accounts)
      shift
      caldav_accounts "$@"
      ;;
    caldav_fetch|fetch)
      shift
      caldav_fetch "$@"
      ;;
    caldav_agenda|agenda)
      shift
      caldav_agenda "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module caldav has no function $1"
      fi
      __q_help caldav
      return 1
      ;;
    esac
    ;;
  crypt)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "crypt" "$@"
      ;;
    encrypt_symmetric)
      shift
      encrypt_symmetric "$@"
      ;;
    decrypt_symmetric)
      shift
      decrypt_symmetric "$@"
      ;;
    gen_github_keypair)
      shift
      gen_github_keypair "$@"
      ;;
    package)
      shift
      package "$@"
      ;;
    payloadify)
      shift
      payloadify "$@"
      ;;
    downloadify)
      shift
      downloadify "$@"
      ;;
    crypt_hash|hash)
      shift
      crypt_hash "$@"
      ;;
    crypt_selfsign|selfsign)
      shift
      crypt_selfsign "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module crypt has no function $1"
      fi
      __q_help crypt
      return 1
      ;;
    esac
    ;;
  debian)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "debian" "$@"
      ;;
    debian_setup|setup)
      shift
      debian_setup "$@"
      ;;
    debian_install_or_skip|install_or_skip)
      shift
      debian_install_or_skip "$@"
      ;;
    debian_install_imgcat|install_imgcat)
      shift
      debian_install_imgcat "$@"
      ;;
    debian_setup_mc|setup_mc)
      shift
      debian_setup_mc "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module debian has no function $1"
      fi
      __q_help debian
      return 1
      ;;
    esac
    ;;
  fedora)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "fedora" "$@"
      ;;
    fedora_setup|setup)
      shift
      fedora_setup "$@"
      ;;
    dnf_install_or_skip)
      shift
      dnf_install_or_skip "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module fedora has no function $1"
      fi
      __q_help fedora
      return 1
      ;;
    esac
    ;;
  file)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "file" "$@"
      ;;
    file_mktemp|mktemp)
      shift
      file_mktemp "$@"
      ;;
    file_mtime|mtime)
      shift
      file_mtime "$@"
      ;;
    file_age|age)
      shift
      file_age "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module file has no function $1"
      fi
      __q_help file
      return 1
      ;;
    esac
    ;;
  find)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "find" "$@"
      ;;
    f)
      shift
      f "$@"
      ;;
    fcc)
      shift
      fcc "$@"
      ;;
    fgo)
      shift
      fgo "$@"
      ;;
    fjava)
      shift
      fjava "$@"
      ;;
    faidl)
      shift
      faidl "$@"
      ;;
    fd)
      shift
      fd "$@"
      ;;
    find_replace|replace)
      shift
      find_replace "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module find has no function $1"
      fi
      __q_help find
      return 1
      ;;
    esac
    ;;
  git)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "git" "$@"
      ;;
    mkproject)
      shift
      mkproject "$@"
      ;;
    git_ssh_init|ssh_init)
      shift
      git_ssh_init "$@"
      ;;
    git_get_origin|get_origin)
      shift
      git_get_origin "$@"
      ;;
    git_master_branch|master_branch)
      shift
      git_master_branch "$@"
      ;;
    git_cherrypick_branch|cherrypick_branch)
      shift
      git_cherrypick_branch "$@"
      ;;
    git_sparse_clone|sparse_clone)
      shift
      git_sparse_clone "$@"
      ;;
    git_changed_lines|changed_lines)
      shift
      git_changed_lines "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module git has no function $1"
      fi
      __q_help git
      return 1
      ;;
    esac
    ;;
  go)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "go" "$@"
      ;;
    go_pkg_do|pkg_do)
      shift
      go_pkg_do "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module go has no function $1"
      fi
      __q_help go
      return 1
      ;;
    esac
    ;;
  hg)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "hg" "$@"
      ;;
    hg_root|root)
      shift
      hg_root "$@"
      ;;
    hg_repo_name|repo_name)
      shift
      hg_repo_name "$@"
      ;;
    hg_branch_name|branch_name)
      shift
      hg_branch_name "$@"
      ;;
    hg_ps1_widget|ps1_widget)
      shift
      hg_ps1_widget "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module hg has no function $1"
      fi
      __q_help hg
      return 1
      ;;
    esac
    ;;
  init)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "init" "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module init has no function $1"
      fi
      __q_help init
      return 1
      ;;
    esac
    ;;
  install)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "install" "$@"
      ;;
    install_file|file)
      shift
      install_file "$@"
      ;;
    reinstall_file)
      shift
      reinstall_file "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module install has no function $1"
      fi
      __q_help install
      return 1
      ;;
    esac
    ;;
  kagi)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "kagi" "$@"
      ;;
    kagi_search_json|search_json)
      shift
      kagi_search_json "$@"
      ;;
    kagi_summarize_json|summarize_json)
      shift
      kagi_summarize_json "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module kagi has no function $1"
      fi
      __q_help kagi
      return 1
      ;;
    esac
    ;;
  keys)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "keys" "$@"
      ;;
    keys_git|git)
      shift
      keys_git "$@"
      ;;
    keys_path|path)
      shift
      keys_path "$@"
      ;;
    keys_var|var)
      shift
      keys_var "$@"
      ;;
    keys_key|key)
      shift
      keys_key "$@"
      ;;
    keys_flush|flush)
      shift
      keys_flush "$@"
      ;;
    keys_sync|sync)
      shift
      keys_sync "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module keys has no function $1"
      fi
      __q_help keys
      return 1
      ;;
    esac
    ;;
  mac)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "mac" "$@"
      ;;
    mac_setup|setup)
      shift
      mac_setup "$@"
      ;;
    brew)
      shift
      brew "$@"
      ;;
    reinstall_brew)
      shift
      reinstall_brew "$@"
      ;;
    mac_enable_ipconfig_verbose|enable_ipconfig_verbose)
      shift
      mac_enable_ipconfig_verbose "$@"
      ;;
    mac_get_user_shell|get_user_shell)
      shift
      mac_get_user_shell "$@"
      ;;
    mac_brew_bash_path|brew_bash_path)
      shift
      mac_brew_bash_path "$@"
      ;;
    mac_switch_to_bash|switch_to_bash)
      shift
      mac_switch_to_bash "$@"
      ;;
    icloud)
      shift
      icloud "$@"
      ;;
    icloud_evict)
      shift
      icloud_evict "$@"
      ;;
    brew_install_or_skip)
      shift
      brew_install_or_skip "$@"
      ;;
    mac_install_miniconda|install_miniconda)
      shift
      mac_install_miniconda "$@"
      ;;
    mac_install_devtools|install_devtools)
      shift
      mac_install_devtools "$@"
      ;;
    mac_kill_defender|kill_defender)
      shift
      mac_kill_defender "$@"
      ;;
    mac_suppress_defender|suppress_defender)
      shift
      mac_suppress_defender "$@"
      ;;
    mac_kill_crashplan|kill_crashplan)
      shift
      mac_kill_crashplan "$@"
      ;;
    mac_hogs|hogs)
      shift
      mac_hogs "$@"
      ;;
    mac_cpu_hogs|cpu_hogs)
      shift
      mac_cpu_hogs "$@"
      ;;
    mac_cpulimit|cpulimit)
      shift
      mac_cpulimit "$@"
      ;;
    mac_disable_powernap|disable_powernap)
      shift
      mac_disable_powernap "$@"
      ;;
    mac_power_stats|power_stats)
      shift
      mac_power_stats "$@"
      ;;
    mac_fix_ssh_locale_config|fix_ssh_locale_config)
      shift
      mac_fix_ssh_locale_config "$@"
      ;;
    mac_pid_suspend|pid_suspend)
      shift
      mac_pid_suspend "$@"
      ;;
    mac_setup_iterm2|setup_iterm2)
      shift
      mac_setup_iterm2 "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module mac has no function $1"
      fi
      __q_help mac
      return 1
      ;;
    esac
    ;;
  media)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "media" "$@"
      ;;
    yt-dl)
      shift
      yt-dl "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module media has no function $1"
      fi
      __q_help media
      return 1
      ;;
    esac
    ;;
  monitor)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "monitor" "$@"
      ;;
    stream_load_stats)
      shift
      stream_load_stats "$@"
      ;;
    load_hist)
      shift
      load_hist "$@"
      ;;
    latest_load_stats)
      shift
      latest_load_stats "$@"
      ;;
    write_load_stats)
      shift
      write_load_stats "$@"
      ;;
    stream_top_stats)
      shift
      stream_top_stats "$@"
      ;;
    stream_net_stats)
      shift
      stream_net_stats "$@"
      ;;
    proc_stats)
      shift
      proc_stats "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module monitor has no function $1"
      fi
      __q_help monitor
      return 1
      ;;
    esac
    ;;
  mtg)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "mtg" "$@"
      ;;
    mtg_oracle_json|oracle_json)
      shift
      mtg_oracle_json "$@"
      ;;
    mtg_rules|rules)
      shift
      mtg_rules "$@"
      ;;
    mtg_card_json|card_json)
      shift
      mtg_card_json "$@"
      ;;
    mtg_card|card)
      shift
      mtg_card "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module mtg has no function $1"
      fi
      __q_help mtg
      return 1
      ;;
    esac
    ;;
  multiple_choice)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "multiple_choice" "$@"
      ;;
    multiple_choice)
      shift
      multiple_choice "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module multiple_choice has no function $1"
      fi
      __q_help multiple_choice
      return 1
      ;;
    esac
    ;;
  net)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "net" "$@"
      ;;
    net_host|host)
      shift
      net_host "$@"
      ;;
    net_dl|dl)
      shift
      net_dl "$@"
      ;;
    net_online|online)
      shift
      net_online "$@"
      ;;
    net_cidr_to_netmask|cidr_to_netmask)
      shift
      net_cidr_to_netmask "$@"
      ;;
    net_health|health)
      shift
      net_health "$@"
      ;;
    net_ssh_fingerprint|ssh_fingerprint)
      shift
      net_ssh_fingerprint "$@"
      ;;
    net_dump_cert|dump_cert)
      shift
      net_dump_cert "$@"
      ;;
    net_ccurl|ccurl)
      shift
      net_ccurl "$@"
      ;;
    net_dataurl|dataurl)
      shift
      net_dataurl "$@"
      ;;
    net_undataurl|undataurl)
      shift
      net_undataurl "$@"
      ;;
    net_rtt|rtt)
      shift
      net_rtt "$@"
      ;;
    net_ip4|ip4)
      shift
      net_ip4 "$@"
      ;;
    net_ip4gw|ip4gw)
      shift
      net_ip4gw "$@"
      ;;
    net_serve|serve)
      shift
      net_serve "$@"
      ;;
    dump_url)
      shift
      dump_url "$@"
      ;;
    wiki)
      shift
      wiki "$@"
      ;;
    wifi_device)
      shift
      wifi_device "$@"
      ;;
    net_wifi_name|wifi_name)
      shift
      net_wifi_name "$@"
      ;;
    net_ssh_fingerprint|ssh_fingerprint)
      shift
      net_ssh_fingerprint "$@"
      ;;
    net_ssh_aliases|ssh_aliases)
      shift
      net_ssh_aliases "$@"
      ;;
    net_ssh_fqdn|ssh_fqdn)
      shift
      net_ssh_fqdn "$@"
      ;;
    net_wa_link|wa_link)
      shift
      net_wa_link "$@"
      ;;
    net_gallery|gallery)
      shift
      net_gallery "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module net has no function $1"
      fi
      __q_help net
      return 1
      ;;
    esac
    ;;
  news)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "news" "$@"
      ;;
    news_all|all)
      shift
      news_all "$@"
      ;;
    news_stocks|stocks)
      shift
      news_stocks "$@"
      ;;
    news_weather|weather)
      shift
      news_weather "$@"
      ;;
    news_brutalist_report_source|brutalist_report_source)
      shift
      news_brutalist_report_source "$@"
      ;;
    news_nytimes|nytimes)
      shift
      news_nytimes "$@"
      ;;
    news_npr|npr)
      shift
      news_npr "$@"
      ;;
    news_pbs|pbs)
      shift
      news_pbs "$@"
      ;;
    news_register|register)
      shift
      news_register "$@"
      ;;
    news_cnbc|cnbc)
      shift
      news_cnbc "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module news has no function $1"
      fi
      __q_help news
      return 1
      ;;
    esac
    ;;
  notes)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "notes" "$@"
      ;;
    notes_note|note)
      shift
      notes_note "$@"
      ;;
    notes_list|list)
      shift
      notes_list "$@"
      ;;
    notes_sync|sync)
      shift
      notes_sync "$@"
      ;;
    notes_todo|todo)
      shift
      notes_todo "$@"
      ;;
    notes_undo|undo)
      shift
      notes_undo "$@"
      ;;
    notes_perl|perl)
      shift
      notes_perl "$@"
      ;;
    notes_api_list_notes|api_list_notes)
      shift
      notes_api_list_notes "$@"
      ;;
    notes_backup|backup)
      shift
      notes_backup "$@"
      ;;
    notes_api_empty_notes|api_empty_notes)
      shift
      notes_api_empty_notes "$@"
      ;;
    notes_api_list_todos|api_list_todos)
      shift
      notes_api_list_todos "$@"
      ;;
    print_todo_categories)
      shift
      print_todo_categories "$@"
      ;;
    notes_api_git|api_git)
      shift
      notes_api_git "$@"
      ;;
    notes_api_pushd|api_pushd)
      shift
      notes_api_pushd "$@"
      ;;
    notes_api_clone|api_clone)
      shift
      notes_api_clone "$@"
      ;;
    notes_api_fsck|api_fsck)
      shift
      notes_api_fsck "$@"
      ;;
    nw)
      shift
      nw "$@"
      ;;
    notes_window|window)
      shift
      notes_window "$@"
      ;;
    notes_api_find|api_find)
      shift
      notes_api_find "$@"
      ;;
    notes_api_quick_title|api_quick_title)
      shift
      notes_api_quick_title "$@"
      ;;
    notes_log|log)
      shift
      notes_log "$@"
      ;;
    notes_api_match_files|api_match_files)
      shift
      notes_api_match_files "$@"
      ;;
    notes_ls|ls)
      shift
      notes_ls "$@"
      ;;
    notes_hist|hist)
      shift
      notes_hist "$@"
      ;;
    notes_api_drop_note|api_drop_note)
      shift
      notes_api_drop_note "$@"
      ;;
    notes_gc|gc)
      shift
      notes_gc "$@"
      ;;
    notes_api_update_note|api_update_note)
      shift
      notes_api_update_note "$@"
      ;;
    notes_api_edit_note|api_edit_note)
      shift
      notes_api_edit_note "$@"
      ;;
    notes_api_perl_preview|api_perl_preview)
      shift
      notes_api_perl_preview "$@"
      ;;
    notes_claude|claude)
      shift
      notes_claude "$@"
      ;;
    notes_api_pushd|api_pushd)
      shift
      notes_api_pushd "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module notes has no function $1"
      fi
      __q_help notes
      return 1
      ;;
    esac
    ;;
  omdb)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "omdb" "$@"
      ;;
    omdb_set_key|set_key)
      shift
      omdb_set_key "$@"
      ;;
    omdb_register_key|register_key)
      shift
      omdb_register_key "$@"
      ;;
    omdb_get_key|get_key)
      shift
      omdb_get_key "$@"
      ;;
    omdb_query|query)
      shift
      omdb_query "$@"
      ;;
    omdb_guess_title|guess_title)
      shift
      omdb_guess_title "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module omdb has no function $1"
      fi
      __q_help omdb
      return 1
      ;;
    esac
    ;;
  path)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "path" "$@"
      ;;
    path_expand|expand)
      shift
      path_expand "$@"
      ;;
    path_resolve|resolve)
      shift
      path_resolve "$@"
      ;;
    path_push|push)
      shift
      path_push "$@"
      ;;
    path_pop|pop)
      shift
      path_pop "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module path has no function $1"
      fi
      __q_help path
      return 1
      ;;
    esac
    ;;
  pkg)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "pkg" "$@"
      ;;
    pkg_install_or_skip|install_or_skip)
      shift
      pkg_install_or_skip "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module pkg has no function $1"
      fi
      __q_help pkg
      return 1
      ;;
    esac
    ;;
  python)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "python" "$@"
      ;;
    python_venv|venv)
      shift
      python_venv "$@"
      ;;
    python_pip_run|pip_run)
      shift
      python_pip_run "$@"
      ;;
    python_ipynb|ipynb)
      shift
      python_ipynb "$@"
      ;;
    python_detect|detect)
      shift
      python_detect "$@"
      ;;
    python_latest|latest)
      shift
      python_latest "$@"
      ;;
    python_func|func)
      shift
      python_func "$@"
      ;;
    python_black|black)
      shift
      python_black "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module python has no function $1"
      fi
      __q_help python
      return 1
      ;;
    esac
    ;;
  quick)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "quick" "$@"
      ;;
    quick_rebuild|rebuild)
      shift
      quick_rebuild "$@"
      ;;
    q)
      shift
      q "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module quick has no function $1"
      fi
      __q_help quick
      return 1
      ;;
    esac
    ;;
  rust)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "rust" "$@"
      ;;
    rustup)
      shift
      rustup "$@"
      ;;
    rust_install_goodies|install_goodies)
      shift
      rust_install_goodies "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module rust has no function $1"
      fi
      __q_help rust
      return 1
      ;;
    esac
    ;;
  screen)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "screen" "$@"
      ;;
    screen_session|session)
      shift
      screen_session "$@"
      ;;
    screen_window|window)
      shift
      screen_window "$@"
      ;;
    screen_rename|rename)
      shift
      screen_rename "$@"
      ;;
    screen_home|home)
      shift
      screen_home "$@"
      ;;
    screen_reset_dirname|reset_dirname)
      shift
      screen_reset_dirname "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module screen has no function $1"
      fi
      __q_help screen
      return 1
      ;;
    esac
    ;;
  strings)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "strings" "$@"
      ;;
    strings_urlencode|urlencode)
      shift
      strings_urlencode "$@"
      ;;
    strings_strip_control|strip_control)
      shift
      strings_strip_control "$@"
      ;;
    strings_repeat|repeat)
      shift
      strings_repeat "$@"
      ;;
    strings_join|join)
      shift
      strings_join "$@"
      ;;
    strings_sgrep|sgrep)
      shift
      strings_sgrep "$@"
      ;;
    strings_strip_prefix|strip_prefix)
      shift
      strings_strip_prefix "$@"
      ;;
    strings_trim|trim)
      shift
      strings_trim "$@"
      ;;
    strings_elide|elide)
      shift
      strings_elide "$@"
      ;;
    strings_strip_prefix|strip_prefix)
      shift
      strings_strip_prefix "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module strings has no function $1"
      fi
      __q_help strings
      return 1
      ;;
    esac
    ;;
  time)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "time" "$@"
      ;;
    time_zones|zones)
      shift
      time_zones "$@"
      ;;
    time_get_tz|get_tz)
      shift
      time_get_tz "$@"
      ;;
    time_local|local)
      shift
      time_local "$@"
      ;;
    time_utc|utc)
      shift
      time_utc "$@"
      ;;
    time_in|in)
      shift
      time_in "$@"
      ;;
    time_tz_diff|tz_diff)
      shift
      time_tz_diff "$@"
      ;;
    time_ts|ts)
      shift
      time_ts "$@"
      ;;
    time_convert|convert)
      shift
      time_convert "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module time has no function $1"
      fi
      __q_help time
      return 1
      ;;
    esac
    ;;
  transit)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "transit" "$@"
      ;;
    transit_sbb|sbb)
      shift
      transit_sbb "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module transit has no function $1"
      fi
      __q_help transit
      return 1
      ;;
    esac
    ;;
  util)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "util" "$@"
      ;;
    util_ddu|ddu)
      shift
      util_ddu "$@"
      ;;
    util_sudo|sudo)
      shift
      util_sudo "$@"
      ;;
    reload)
      shift
      reload "$@"
      ;;
    util_markdown|markdown)
      shift
      util_markdown "$@"
      ;;
    human_size)
      shift
      human_size "$@"
      ;;
    install_heroku_cli)
      shift
      install_heroku_cli "$@"
      ;;
    install_bazelisk)
      shift
      install_bazelisk "$@"
      ;;
    jup)
      shift
      jup "$@"
      ;;
    wait_for_file)
      shift
      wait_for_file "$@"
      ;;
    util_forex|forex)
      shift
      util_forex "$@"
      ;;
    util_run|run)
      shift
      util_run "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module util has no function $1"
      fi
      __q_help util
      return 1
      ;;
    esac
    ;;
  xterm_colors)
    shift
    case "$1" in
    help|-h|--help|?)
      shift
      __q_help "xterm_colors" "$@"
      ;;
    channel_step)
      shift
      channel_step "$@"
      ;;
    greyscale_step)
      shift
      greyscale_step "$@"
      ;;
    rgb_to_xterm)
      shift
      rgb_to_xterm "$@"
      ;;
    hue_diff)
      shift
      hue_diff "$@"
      ;;
    brightness)
      shift
      brightness "$@"
      ;;
    contrast)
      shift
      contrast "$@"
      ;;
    xterm_to_rgb)
      shift
      xterm_to_rgb "$@"
      ;;
    xterm_to_fg)
      shift
      xterm_to_fg "$@"
      ;;
    xterm_to_bg)
      shift
      xterm_to_bg "$@"
      ;;
    tfmt)
      shift
      tfmt "$@"
      ;;
    color)
      shift
      color "$@"
      ;;
    shades)
      shift
      shades "$@"
      ;;
    colors)
      shift
      colors "$@"
      ;;
    *)
      if [ -n "$1" ]; then
        echo "Module xterm_colors has no function $1"
      fi
      __q_help xterm_colors
      return 1
      ;;
    esac
    ;;
  *)
    echo "Unknown module $1"
    return 1
    ;;
  esac
}

function __q_help() {
  if [ "$#" -eq 0 ]; then
    echo "q - redshell function registry"
    echo "Usage: q [-h|--help] MODULE FUNCTION [ARG...]"
    echo "Run q --help MODULE for more information on a module."
    echo
    echo "Available modules:"
    echo -ne '\033[1m'
    echo -n '  ascii_art'
    echo -ne '\033[0m'
    echo '         Assorted ascii art, screen drawing and speech bubbles.'
    echo -ne '\033[1m'
    echo -n '  bash'
    echo -ne '\033[0m'
    echo '              Parse bash files and automate bash scripting.'
    echo -ne '\033[1m'
    echo -n '  browser'
    echo -ne '\033[0m'
    echo '           Browser automation, downloads, link generators.'
    echo -ne '\033[1m'
    echo -n '  caldav'
    echo -ne '\033[0m'
    echo '            CalDAV calendar fetching utilities.'
    echo '                    '
    echo '                    Passwords are stored under CalDAV/Accounts/$account, URLs under CalDAV/URLs/$account.'
    echo -ne '\033[1m'
    echo -n '  crypt'
    echo -ne '\033[0m'
    echo '             Encrypt/decrypt, signing, keypairs. SSH and GPG helpers.'
    echo -ne '\033[1m'
    echo -n '  debian'
    echo -ne '\033[0m'
    echo '            Debian setup and package management.'
    echo -ne '\033[1m'
    echo -n '  fedora'
    echo -ne '\033[0m'
    echo '            Fedora setup and package management.'
    echo -ne '\033[1m'
    echo -n '  file'
    echo -ne '\033[0m'
    echo '              File helpers.'
    echo -ne '\033[1m'
    echo -n '  find'
    echo -ne '\033[0m'
    echo '              Shorthands for find and grep.'
    echo -ne '\033[1m'
    echo -n '  git'
    echo -ne '\033[0m'
    echo '               Automate git and github operations.'
    echo -ne '\033[1m'
    echo -n '  go'
    echo -ne '\033[0m'
    echo '                Helpers for dealing with Go packages.'
    echo -ne '\033[1m'
    echo -n '  hg'
    echo -ne '\033[0m'
    echo '                Mercurial helpers.'
    echo -ne '\033[1m'
    echo -n '  install'
    echo -ne '\033[0m'
    echo '           Install a file into another file, optionally with a keyword.'
    echo -ne '\033[1m'
    echo -n '  kagi'
    echo -ne '\033[0m'
    echo '              Kagi search and API wrappers.'
    echo -ne '\033[1m'
    echo -n '  keys'
    echo -ne '\033[0m'
    echo '              Key management utils using pass and gpg.'
    echo '                    '
    echo '                    All keys managed by this code are stored under the "Redshell/" folder in pass.'
    echo '                    '
    echo '                    We support two types of keys which are treated slightly differently:'
    echo '                    - .key: Typically larger secrets that are exported as files, e.g. SSH keys or'
    echo '                    certificates. You should take care to periodically expire these when not'
    echo '                    needed, or further protect them with passwords and file permissions.'
    echo '                    - .var keys: Small secrets used as ENV variables or arguments. They are not'
    echo '                    cached as files during use.'
    echo -ne '\033[1m'
    echo -n '  mac'
    echo -ne '\033[0m'
    echo '               Mac setup, package management and various helpers.'
    echo -ne '\033[1m'
    echo -n '  media'
    echo -ne '\033[0m'
    echo '             Functions for working with media, ffmpeg, youtube, etc.'
    echo -ne '\033[1m'
    echo -n '  monitor'
    echo -ne '\033[0m'
    echo '           System load monitoring and logging.'
    echo -ne '\033[1m'
    echo -n '  mtg'
    echo -ne '\033[0m'
    echo '               Stuff for Magic: The Gathering.'
    echo -ne '\033[1m'
    echo -n '  multiple_choice'
    echo -ne '\033[0m'
    echo '   Interactive multiple choice prompts.'
    echo -ne '\033[1m'
    echo -n '  net'
    echo -ne '\033[0m'
    echo '               Network and wifi helpers, netcat wrappers, etc.'
    echo -ne '\033[1m'
    echo -n '  news'
    echo -ne '\033[0m'
    echo '              News and weather.'
    echo -ne '\033[1m'
    echo -n '  notes'
    echo -ne '\033[0m'
    echo '             Note management based on git and markdown.'
    echo -ne '\033[1m'
    echo -n '  omdb'
    echo -ne '\033[0m'
    echo '              OMDB (Open Movie Database) helpers for bash.'
    echo -ne '\033[1m'
    echo -n '  path'
    echo -ne '\033[0m'
    echo '              UNIX style path helpers.'
    echo -ne '\033[1m'
    echo -n '  pkg'
    echo -ne '\033[0m'
    echo '               Cross-platform package management.'
    echo -ne '\033[1m'
    echo -n '  python'
    echo -ne '\033[0m'
    echo '            Python env management, python-shell FFI and Jupyter.'
    echo -ne '\033[1m'
    echo -n '  quick'
    echo -ne '\033[0m'
    echo '             Redshell function help, switch and autocomplete.'
    echo -ne '\033[1m'
    echo -n '  rust'
    echo -ne '\033[0m'
    echo '              Manage rust toolchain and environment.'
    echo -ne '\033[1m'
    echo -n '  screen'
    echo -ne '\033[0m'
    echo '            UNIX style path helpers.'
    echo -ne '\033[1m'
    echo -n '  strings'
    echo -ne '\033[0m'
    echo '           String helpers for bash.'
    echo -ne '\033[1m'
    echo -n '  time'
    echo -ne '\033[0m'
    echo '              Time and date helpers.'
    echo -ne '\033[1m'
    echo -n '  transit'
    echo -ne '\033[0m'
    echo '           Transit helpers.'
    echo -ne '\033[1m'
    echo -n '  util'
    echo -ne '\033[0m'
    echo '              Catch-all utility functions that don'"'"'t fit anywhere else.'
    echo -ne '\033[1m'
    echo -n '  xterm_colors'
    echo -ne '\033[0m'
    echo '      Work with the xterm color space, convert to RGB, etc.'
    return 0
  fi
  if [ "$#" -eq 1 ]; then
    case "$1" in
    ascii_art)
      echo "Usage: q ascii_art FUNCTION [ARG...]"
      echo "Assorted ascii art, screen drawing and speech bubbles."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  print_speech_bubble'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  erase_lines'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  cursor_position'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  cursor_row'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  print_bmo'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  print_pedro'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  scroll_output_pedro'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  select_visual'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    bash)
      echo "Usage: q bash FUNCTION [ARG...]"
      echo "Parse bash files and automate bash scripting."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  get_bash_functions'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    browser)
      echo "Usage: q browser FUNCTION [ARG...]"
      echo "Browser automation, downloads, link generators."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  gdocs_id'
      echo -n ' URL'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Extracts a Google Docs ID from a URL.'
      echo -ne '\033[1m'
      echo -n '  sheets_dl_link'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Usage sheets_dl_link URL [FORMAT]'
      echo '    Generates a direct download link for a Google Docs spreadsheet.'
      echo '    FORMAT is optional and defaults to "csv".'
      echo -ne '\033[1m'
      echo -n '  chrome_path'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns the path to the Chrome executable.'
      echo -ne '\033[1m'
      echo -n '  downloads_path'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns the path to the Downloads folder.'
      echo -ne '\033[1m'
      echo -n '  dl'
      echo -n ' URL'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Downloads a URL with the browser and returns the path to the downloaded file.'
      echo '    This is finnicky and relies on the browser downloading to the default'
      echo '    Downloads folder. If multiple new files are created around the same time, this'
      echo '    might behave in unpredictable ways. You'"'"'ve been warned.'
      ;;
    caldav)
      echo "Usage: q caldav FUNCTION [ARG...]"
      echo "CalDAV calendar fetching utilities."
      echo ""
      echo "Passwords are stored under CalDAV/Accounts/$account, URLs under CalDAV/URLs/$account."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  accounts'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    List configured CalDAV accounts.'
      echo -ne '\033[1m'
      echo -n '  fetch'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -a|--account'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ACCOUNT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -u|--username'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[92m'
      echo -n ' USER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' URL'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Fetch a CalDAV calendar and output its contents.'
      echo '    '
      echo '    '
      echo '    Options:'
      echo '    -a, --account ACCOUNT  Account name for password lookup via keys_var CalDAV/$account.'
      echo '    If omitted and exactly one account exists, uses that.'
      echo '    -u, --username USER    Username for authentication. Defaults to account name.'
      echo '    '
      echo '    The password is retrieved from pass using: keys_var CalDAV/$account'
      echo '    If URL is not provided, it is retrieved using: keys_var CalDAV/URLs/$account'
      echo '    '
      echo '    Example:'
      echo '    caldav_fetch -a fastmail -u user@fastmail.com https://caldav.fastmail.com/dav/calendars/user/...'
      echo '    caldav_fetch -a fastmail  # URL loaded from keys_var CalDAV/URLs/fastmail'
      echo -ne '\033[1m'
      echo -n '  agenda'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -a|--account'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ACCOUNT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -u|--username'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[92m'
      echo -n ' USER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -d|--days'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' DAYS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' URL'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Show upcoming events from a CalDAV calendar.'
      echo '    '
      echo '    '
      echo '    Options:'
      echo '    -a, --account ACCOUNT  Account name for password lookup.'
      echo '    If omitted and exactly one account exists, uses that.'
      echo '    -u, --username USER    Username for authentication. Defaults to account name.'
      echo '    -d, --days DAYS        Number of days to show (from today). Defaults to 31.'
      echo '    '
      echo '    If URL is not provided, it is retrieved using: keys_var CalDAV/URLs/$account'
      echo '    '
      echo '    Example:'
      echo '    caldav_agenda -a fastmail -d 14 https://caldav.fastmail.com/dav/calendars/user/...'
      echo '    caldav_agenda -a fastmail  # URL loaded from keys_var CalDAV/URLs/fastmail'
      ;;
    crypt)
      echo "Usage: q crypt FUNCTION [ARG...]"
      echo "Encrypt/decrypt, signing, keypairs. SSH and GPG helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  encrypt_symmetric'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  decrypt_symmetric'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  gen_github_keypair'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  package'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  payloadify'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  downloadify'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Encrypt a file and wrap it in a base64 self-unpacking shell script.'
      echo -ne '\033[1m'
      echo -n '  hash'
      echo -n ' ALGO'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' INPUT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias h='q crypt hash'"
      echo -ne '\033[0m'
      echo '    Print a cryptographic hash of the input.'
      echo '    '
      echo '    If no INPUT is provided, read from stdin.'
      echo '    '
      echo '    Supported ALGO values: md5 or SHA version (1, 128, 224, 256, 512).'
      echo '    '
      echo '    hash 256 foo -> b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c'
      echo '    hash md5 foo -> d3b07384d113edec49eaa6238ad5ff00'
      echo -ne '\033[1m'
      echo -n '  selfsign'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' NAME'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' OPTIONS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Generate a self-signed certificate.'
      echo '    '
      echo '    '
      echo '    Options are the same as for openssl req'
      ;;
    debian)
      echo "Usage: q debian FUNCTION [ARG...]"
      echo "Debian setup and package management."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  setup'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  install_or_skip'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  install_imgcat'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  setup_mc'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    fedora)
      echo "Usage: q fedora FUNCTION [ARG...]"
      echo "Fedora setup and package management."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  setup'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  dnf_install_or_skip'
      echo -n ' package1'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' package2'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Install a package with dnf if it'"'"'s not already installed.'
      ;;
    file)
      echo "Usage: q file FUNCTION [ARG...]"
      echo "File helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  mktemp'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TITLE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Cross-platform version of mktemp across BSD and GNU. Creates a temp file and'
      echo '    prints its path. If TITLE is supplied, it will be used as prefix or suffix.'
      echo -ne '\033[1m'
      echo -n '  mtime'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -g'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns the modification time of PATH in "YYYY-MM-DD HH:MM:SS" format.'
      echo '    '
      echo '    Options:'
      echo '    '
      echo '    -g    Use git to get the last modified time if the file is tracked.'
      echo -ne '\033[1m'
      echo -n '  age'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -s'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    find)
      echo "Usage: q find FUNCTION [ARG...]"
      echo "Shorthands for find and grep."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  f'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Shorthand for find'
      echo -ne '\033[1m'
      echo -n '  fcc'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  fgo'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  fjava'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  faidl'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  fd'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  replace'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Usage find_replace [DIR] GLOB NEEDLE REPLACEMENT'
      ;;
    git)
      echo "Usage: q git FUNCTION [ARG...]"
      echo "Automate git and github operations."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  mkproject'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  ssh_init'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  get_origin'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  master_branch'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  cherrypick_branch'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  sparse_clone'
      echo -n ' REPO'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -b'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' BRANCH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -p'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[31m'
      echo -n ' DIR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Clones a git repository with only the specified subdirectories.'
      echo -ne '\033[1m'
      echo -n '  changed_lines'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    go)
      echo "Usage: q go FUNCTION [ARG...]"
      echo "Helpers for dealing with Go packages."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  pkg_do'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    hg)
      echo "Usage: q hg FUNCTION [ARG...]"
      echo "Mercurial helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  root'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Fast check for mercurial. (About 100 times faster than `hg root`.) Prints the'
      echo '    root directory of the repository if the current directory is in a repository.'
      echo '    Otherwise returns 1.'
      echo -ne '\033[1m'
      echo -n '  repo_name'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  branch_name'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  ps1_widget'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    init)
      echo "Usage: q init FUNCTION [ARG...]"
      echo "Initialization routines."
      echo
      echo "Available functions:"
      ;;
    install)
      echo "Usage: q install FUNCTION [ARG...]"
      echo "Install a file into another file, optionally with a keyword."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  file'
      echo -n ' -s|--sfile'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' SFILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -d|--dfile'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' DFILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -c|--char'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CHAR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -k|--section'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' SECTION'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -d|--append'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --uninstall'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Installs the contents of DFILE into SFILE, guarded by a comment at the first'
      echo '    and last line. Optional arguments CHAR and SECTION control what the commend'
      echo '    guard looks like. Default CHAR is '"'"'#'"'"' and default SECTION is '"'"'REDSHELL'"'"' for:'
      echo '    '
      echo '    # REDSHELL'
      echo '    ... contents'
      echo '    # /REDSHELL'
      echo '    '
      echo '    Subsequent calls to install_file remove the old contents before intalling the'
      echo '    new contents. New contents replace the old contents in-place.'
      echo '    '
      echo '    Pass --append to install the contents always at the end of the file, rather'
      echo '    than in-place. Pass --uninstall to only uninstall the file.'
      echo '    '
      echo '    On Linux, this attempts to flock DFILE. If the file is already locked, the'
      echo '    function will immediately return 254.'
      echo -ne '\033[1m'
      echo -n '  reinstall_file'
      echo -ne '\033[91m'
      echo -n ' SFILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' DFILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CHAR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' SECTION'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    This is a legacy form of install_file. It is kept for backwards compatibility.'
      echo '    '
      echo '    Installs the contents of DFILE into SFILE, guarded by a comment at the first'
      echo '    and last line. Optional arguments CHAR and SECTION control what the commend'
      echo '    guard looks like. Default CHAR is '"'"'#'"'"' and default SECTION is '"'"'REDSHELL'"'"' for:'
      echo '    '
      echo '    # REDSHELL'
      echo '    ... contents'
      echo '    # /REDSHELL'
      echo '    '
      echo '    Subsequent calls to reinstall_file remove the old contents before intalling'
      echo '    the new contents.'
      ;;
    kagi)
      echo "Usage: q kagi FUNCTION [ARG...]"
      echo "Kagi search and API wrappers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  search_json'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  summarize_json'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    keys)
      echo "Usage: q keys FUNCTION [ARG...]"
      echo "Key management utils using pass and gpg."
      echo ""
      echo "All keys managed by this code are stored under the "Redshell/" folder in pass."
      echo ""
      echo "We support two types of keys which are treated slightly differently:"
      echo "- .key: Typically larger secrets that are exported as files, e.g. SSH keys or"
      echo "certificates. You should take care to periodically expire these when not"
      echo "needed, or further protect them with passwords and file permissions."
      echo "- .var keys: Small secrets used as ENV variables or arguments. They are not"
      echo "cached as files during use."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  git'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ARGS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Wraps git for use with the keys repository.'
      echo -ne '\033[1m'
      echo -n '  path'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -f'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' KEY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Dumps the contents of the given key in a file and returns the path.'
      echo '    '
      echo '    If -f is given, forces regeneration of the file. The file is also regenerated'
      echo '    if it exists but is empty.'
      echo '    '
      echo '    Caution: the file will persist until keys_flush is called, so be sure to'
      echo '    manage its lifecycle appropriately.'
      echo -ne '\033[1m'
      echo -n '  var'
      echo -n ' KEY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' VALUE|--delete'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns the conents of a given .var key in pass. If VALUE is provided, instead'
      echo '    the value is stored in the key. If --delete is provided, the key is removed.'
      echo -ne '\033[1m'
      echo -n '  key'
      echo -n ' KEY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' VALUE|--delete'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns the contents of a given .key key in pass. If VALUE is provided,'
      echo '    instead the value is stored in the key. If --delete is provided, the key is'
      echo '    removed.'
      echo -ne '\033[1m'
      echo -n '  flush'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Removes all cached key files.'
      echo -ne '\033[1m'
      echo -n '  sync'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Pulls the latest changes from the keys git repository and pushes any local'
      echo '    changes.'
      ;;
    mac)
      echo "Usage: q mac FUNCTION [ARG...]"
      echo "Mac setup, package management and various helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  setup'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  brew'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  reinstall_brew'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  enable_ipconfig_verbose'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  get_user_shell'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  brew_bash_path'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  switch_to_bash'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  icloud'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  icloud_evict'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  brew_install_or_skip'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  install_miniconda'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  install_devtools'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  kill_defender'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Kills Microsoft Defender in a way that tends to persist for an hour or so.'
      echo '    This is useful for working around bugs or surviving when they push and update'
      echo '    that breaks the OS.'
      echo '    '
      echo '    Use at your own risk, and only after discussing with your IT department. This'
      echo '    action is likely to be detected.'
      echo -ne '\033[1m'
      echo -n '  suppress_defender'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Keeps Microsoft Defender from restarting.'
      echo '    '
      echo '    Use at your own risk, and only after discussing with your IT department. This'
      echo '    action is likely to be detected.'
      echo -ne '\033[1m'
      echo -n '  kill_crashplan'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Stops CrashPlan from running. CrashPlan is a very poorly optimized backup'
      echo '    service. When you'"'"'re running IO intensive workloads, it can slow them down'
      echo '    massively and eat up 2-3 CPU cores.'
      echo -ne '\033[1m'
      echo -n '  hogs'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  cpu_hogs'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --current'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PERCENT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --lifetime'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PERCENT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Lists PIDs of processes using too much CPU.'
      echo '    '
      echo '    Checks both current CPU % and lifetime CPU % (accumulated CPU time divided'
      echo '    by process elapsed time). Lists processes exceeding either threshold.'
      echo '    '
      echo '    Output: tab-separated pid, lifetime cpu %, current cpu %, command name'
      echo -ne '\033[1m'
      echo -n '  cpulimit'
      echo -n ' LIMIT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PID'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PID'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Limits the CPU usage of processes to a certain percentage.'
      echo -ne '\033[1m'
      echo -n '  disable_powernap'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Stop the computer from waking up to do random things and exhausting the'
      echo '    battery.'
      echo -ne '\033[1m'
      echo -n '  power_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints out some debug information about power management.'
      echo -ne '\033[1m'
      echo -n '  fix_ssh_locale_config'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    macOS uses the non-existent locale LC_CTYPE=UTF-8 by default, which breaks SSH'
      echo '    sessions. This function fixes that by way of global ssh client config.'
      echo -ne '\033[1m'
      echo -n '  pid_suspend'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --resume|--suspend'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PID'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  setup_iterm2'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    media)
      echo "Usage: q media FUNCTION [ARG...]"
      echo "Functions for working with media, ffmpeg, youtube, etc."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  yt-dl'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' OPTIONS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' URL'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Wrapper areound yt-dlp. Automatically ensures dependencies are installed.'
      ;;
    monitor)
      echo "Usage: q monitor FUNCTION [ARG...]"
      echo "System load monitoring and logging."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  stream_load_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  load_hist'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  latest_load_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  write_load_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  stream_top_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  stream_net_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  proc_stats'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Outputs:'
      echo '    1. CPU util'
      echo '    2. Physical RAM util'
      echo '    3. Total RSS'
      echo '    4. User time total'
      echo '    5. System time total'
      echo '    6. PID with the highest CPU util'
      echo '    7. Comm with the highest CPU util'
      echo '    8. CPU util of the proc with the highest CPU util'
      echo '    9. PID with the highest RSS'
      echo '    10. Comm with the highest RSS'
      echo '    11. RSS of the proc with the highest RSS'
      ;;
    mtg)
      echo "Usage: q mtg FUNCTION [ARG...]"
      echo "Stuff for Magic: The Gathering."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  oracle_json'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Fetch the latest oracle cards from Scryfall and return the path to the JSON'
      echo '    dump. The dump is cached for about two weeks.'
      echo -ne '\033[1m'
      echo -n '  rules'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  card_json'
      echo -n ' NAME'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Return the JSON object for the card with the given name. (Case sensitive.)'
      echo -ne '\033[1m'
      echo -n '  card'
      echo -n ' NAME'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Print the Magic: The Gathering card with the given name. (Case sensitive.)'
      ;;
    multiple_choice)
      echo "Usage: q multiple_choice FUNCTION [ARG...]"
      echo "Interactive multiple choice prompts."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  multiple_choice'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -n|-L|-N'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -i'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' INPUT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -p'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PAGE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' MSG'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -a'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ALPHABET'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -I'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CONTROLS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -A'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CONTROL_ALPHABET'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -H'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' HEADER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Display an interactive menu with multiple choices, and then print the selected option to stdout.'
      echo '    '
      echo '    -n: return the number of the selected option'
      echo '    -L: return the string of the selected option'
      echo '    -N: return the alphabet character of the selected option'
      echo '    -p: page number to show'
      echo '    -m: prompt message'
      echo '    -a: alphabet'
      echo '    -I: control options'
      echo '    -A: control alphabet'
      echo '    -i: input (options to pick from)'
      echo '    -H: header to show above the options'
      ;;
    net)
      echo "Usage: q net FUNCTION [ARG...]"
      echo "Network and wifi helpers, netcat wrappers, etc."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  host'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -l|--port'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PORT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -u|--username'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[92m'
      echo -n ' USER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -P|--password'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PASS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -C|certfile'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --keyfile'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[31m'
      echo -n ' DIR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Hosts a folder contents over HTTPs.'
      echo '    '
      echo '    Also see net_serve.'
      echo '    '
      echo '    '
      echo '    Options:'
      echo '    -l, --port PORT     Port to listen on. Default is 8080.'
      echo '    -u, --username USER Username for basic auth.'
      echo '    -P, --password PASS Password for basic auth.'
      echo '    --certfile FILE     Path to the certificate file, or "auto" to generate one.'
      echo '    --keyfile FILE      Path to the key file.'
      echo '    '
      echo '    By default, the server will listen for HTTP connections. If certfile and'
      echo '    keyfile are specified, the server will listen for HTTPS connections.'
      echo '    '
      echo '    If certfile is set to "auto", the server will generate a self-signed cert.'
      echo '    Otherwise, the keyfile must be specified.'
      echo '    '
      echo '    If username and password are specified, the server will require basic auth.'
      echo '    Both or neither must be specified.'
      echo '    '
      echo '    The server will serve the contents of DIR. If DIR is not specified, the server'
      echo '    will serve the current directory.'
      echo -ne '\033[1m'
      echo -n '  dl'
      echo -n ' URL'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Recursively downloads the URL even if it'"'"'s a folder. Accepts all wget options.'
      echo '    '
      echo '    This is basically only useful if you can'"'"'t remember wget options.'
      echo -ne '\033[1m'
      echo -n '  online'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Check if you have a usable internet connection.'
      echo -ne '\033[1m'
      echo -n '  cidr_to_netmask'
      echo -n ' CIDR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Convert a CIDR notation (e.g. 24) to a netmask.'
      echo -ne '\033[1m'
      echo -n '  health'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  ssh_fingerprint'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  dump_cert'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  ccurl'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -M|--max-age'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' SECONDS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -K|--key'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' KEY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CURL_ARGS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Cached curl wrapper. Request parameters are converted to a key and used to'
      echo '    cache the response.'
      echo '    '
      echo '    Options:'
      echo '    -M, --max-age SECONDS  Maximum age of the cache in seconds. Default is 3600.'
      echo '    -K, --key KEY          Use the given key instead of the request parameters.'
      echo -ne '\033[1m'
      echo -n '  dataurl'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Create a data URL from a file.'
      echo -ne '\033[1m'
      echo -n '  undataurl'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias undataurl='q net undataurl'"
      echo -ne '\033[0m'
      echo '    Decode a dataurl from stdin onto stdout.'
      echo -ne '\033[1m'
      echo -n '  rtt'
      echo -ne '\033[34m'
      echo -n ' HOST'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Average round-trip time to the specified host.'
      echo -ne '\033[1m'
      echo -n '  ip4'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias ip4='q net ip4'"
      echo -ne '\033[0m'
      echo '    Print the non-localhost IPv4 addresses of this machine. One address per line.'
      echo -ne '\033[1m'
      echo -n '  ip4gw'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias ip4gw='q net ip4gw'"
      echo -ne '\033[0m'
      echo '    Print the default gateway'"'"'s IP address.'
      echo -ne '\033[1m'
      echo -n '  serve'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -l'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PORT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Serves the contents of a file or stdin over HTTP once, then exits.'
      echo '    '
      echo '    Also see net_host.'
      echo -ne '\033[1m'
      echo -n '  dump_url'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  wiki'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  wifi_device'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  wifi_name'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Print the name of the currently connected wifi network.'
      echo -ne '\033[1m'
      echo -n '  ssh_fingerprint'
      echo -ne '\033[34m'
      echo -n ' HOST'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  ssh_aliases'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints the aliases and hostnames from the ssh config file.'
      echo -ne '\033[1m'
      echo -n '  ssh_fqdn'
      echo -n ' ALIAS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Based on SSH config, looks up the full hostname of the given alias.'
      echo -ne '\033[1m'
      echo -n '  wa_link'
      echo -n ' PHONE_NUMBER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints a link to WhatsApp Web for the given phone number.'
      echo -ne '\033[1m'
      echo -n '  gallery'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --dedupe'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --copy-to'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[31m'
      echo -n ' DIR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --scan-only'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --serve-only'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --force'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --clean'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --title'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TITLE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -l|--port'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PORT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -u|--username'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[92m'
      echo -n ' USER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -P|--password'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PASS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -C|--certfile'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --keyfile'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[31m'
      echo -n ' DIR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Scan a directory for photos and serve a browsable gallery.'
      echo '    '
      echo '    This command scans a directory tree for photos, generates thumbnails and'
      echo '    mid-size images for fast browsing, and serves an HTML gallery.'
      echo '    '
      echo '    The gallery data (thumbnails, mid-size images, JSON index) is stored in a'
      echo '    .gallery hidden directory. The original photos can either be left in place'
      echo '    (referenced by path) or copied to a new directory with date-based names.'
      echo '    '
      echo '    '
      echo '    Options:'
      echo '    --dedupe              Deduplicate photos by hash before indexing.'
      echo '    --copy-to DIR         Copy photos to DIR with date-based names. If not'
      echo '    specified, photos are referenced in place.'
      echo '    --scan-only           Generate gallery data without serving. Useful for'
      echo '    preparing a gallery to be served later.'
      echo '    --serve-only          Skip scanning and serve existing gallery data.'
      echo '    --force               Regenerate thumbnails even if they exist.'
      echo '    --clean               Delete all generated gallery files (.gallery/ and'
      echo '    gallery.html) and exit.'
      echo '    --title TITLE         Gallery title. Defaults to the directory name.'
      echo '    -l, --port PORT       Port to serve on. Default is 8080.'
      echo '    -u, --username USER   Username for basic auth.'
      echo '    -P, --password PASS   Password for basic auth.'
      echo '    -C, --certfile FILE   Certificate file for HTTPS, or "auto" to generate.'
      echo '    --keyfile FILE        Key file for HTTPS.'
      echo '    '
      echo '    Examples:'
      echo '    net_gallery                     # Scan current dir and serve gallery'
      echo '    net_gallery ~/Photos            # Scan ~/Photos and serve gallery'
      echo '    net_gallery --dedupe ~/Backup   # Dedupe and serve photos from backup'
      echo '    net_gallery --scan-only .       # Generate gallery data only'
      echo '    net_gallery --copy-to ~/Clean ~/Messy  # Copy deduped photos to new dir'
      ;;
    news)
      echo "Usage: q news FUNCTION [ARG...]"
      echo "News and weather."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  all'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  stocks'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  weather'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  brutalist_report_source'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  nytimes'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  npr'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  pbs'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  register'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  cnbc'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    notes)
      echo "Usage: q notes FUNCTION [ARG...]"
      echo "Note management based on git and markdown."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  note'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' NOTE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Saves the provided note, intelligently placing it and generating a title. If'
      echo '    run with no arguments, instead opens vim and saves whatever is entered into'
      echo '    the file.'
      echo -ne '\033[1m'
      echo -n '  list'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  sync'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  todo'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TERM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Shows an interactive listing of matching TODOs.'
      echo '    '
      echo '    Uses the following categories:'
      echo '    A -  - Asynchronous Comms'
      echo '    B -  - Bank'
      echo '    C -  - Calendar'
      echo '    E -  - Errand'
      echo '    H -  - Home'
      echo '    M -  - Meeting'
      echo '    L -  - Long Task'
      echo '    O -  - Office'
      echo '    R -  - Reading'
      echo '    S -  - Shopping'
      echo '    T -  - Telephone'
      echo '    W -  - Writing'
      echo '    X -  - Technical Task'
      echo '    Z -  - Misc Quick Task'
      echo '     - Inbox'
      echo -ne '\033[1m'
      echo -n '  undo'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -f'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Undoes the last note change. If the last change was to a local note, it will'
      echo '    refuse to undo it, unless -f is passed.'
      echo -ne '\033[1m'
      echo -n '  perl'
      echo -n ' PROG'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TERM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Applies the provided perl program to matching notes to generate replacements.'
      echo '    Then allows the user to select which replacements to save.'
      echo -ne '\033[1m'
      echo -n '  api_list_notes'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -f'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -a'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TERM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Outputs a list of notes files that match the given terms.'
      echo '    '
      echo '    Options:'
      echo '    -f: Only match files, not directories.'
      echo '    -a: Include archived files.'
      echo '    -w: Match whole words.'
      echo '    '
      echo '    Outputs:'
      echo '    1. relative path'
      echo '    2. mtime'
      echo '    3. age'
      echo '    4. line count'
      echo '    5. depth'
      echo '    6. absolute path'
      echo '    7. type (f or d)'
      echo '    8. title'
      echo '    9. location (g=git or l=local)'
      echo '    10. base path'
      echo '    11. Quick-TODO-aware title'
      echo '    12. Archived (A if archived - if not)'
      echo -ne '\033[1m'
      echo -n '  backup'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Backs up the notes repository to a timestamped tarball in the notes root.'
      echo -ne '\033[1m'
      echo -n '  api_empty_notes'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Lists empty notes.'
      echo -ne '\033[1m'
      echo -n '  api_list_todos'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CONTEXT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TERM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Lists TODOs matching the given context and terms.'
      echo '    '
      echo '    Outputs:'
      echo '    '
      echo '    1. Path'
      echo '    2. Line number'
      echo '    3. State (TODO or DONE)'
      echo '    4. Text of the TODO'
      echo '    5. Absolute path'
      echo '    6. File age'
      echo '    7. File mtime'
      echo '    8. Current state: TODO|DONE|LATER|OVERDUE|SOON'
      echo '    9. Earliest date (if any)'
      echo '    10. Due date (if any)'
      echo '    11. Context (one letter)'
      echo -ne '\033[1m'
      echo -n '  print_todo_categories'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  api_git'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ARGS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Forwards its args to git running with the correct key and in the notes root.'
      echo -ne '\033[1m'
      echo -n '  api_pushd'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  api_clone'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Clones the git reposity.'
      echo -ne '\033[1m'
      echo -n '  api_fsck'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Resets the mtime of notes files from git.'
      echo -ne '\033[1m'
      echo -n '  nw'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  window'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias nwin='q notes window'"
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  api_find'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Runs find automatically scoped to the right mtime by the NEND and NSTART env'
      echo '    variables.'
      echo -ne '\033[1m'
      echo -n '  api_quick_title'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  log'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  api_match_files'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns a list of files, as absolute paths, that match a search query. The'
      echo '    query is a list of terms, separated by spaces. Each term is either a'
      echo '    pro-pattern, or an anti-pattern:'
      echo '    '
      echo '    Pro-pattern terms are regular words (e.g. '"'"'foo'"'"') that MUST appear in the file.'
      echo '    If there are multiple pro-pattern terms, then they all must appear for a file'
      echo '    to match (match all).'
      echo '    '
      echo '    Anti-pattern terms start with a tilde `~` (e.g. `~bar`). Any file containing'
      echo '    even one of the anti-pattern terms is excluded from the results.'
      echo '    '
      echo '    Without any pro-patterns, starts with matching all files.'
      echo '    '
      echo '    Additional flags start with a dash '"'"'-'"'"', to be supplied in any position:'
      echo '    '
      echo '    -w match only complete words (DEFAULT) -W match substrings'
      echo -ne '\033[1m'
      echo -n '  ls'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TERM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints a tree of notes, with the TERM as a filter.'
      echo -ne '\033[1m'
      echo -n '  hist'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' N'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints the N most recent notes.'
      echo -ne '\033[1m'
      echo -n '  api_drop_note'
      echo -n ' NOTE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Delete the note at the provided relative path.'
      echo -ne '\033[1m'
      echo -n '  gc'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Deletes empty notes and runs git gc.'
      echo -ne '\033[1m'
      echo -n '  api_update_note'
      echo -ne '\033[91m'
      echo -n ' RELPATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' CONTENTS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Updates the note at the given relative path with the given contents.'
      echo -ne '\033[1m'
      echo -n '  api_edit_note'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' LINE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Opens vim for the given relative note path, then updates the notes tree using'
      echo '    the result. Optional second argument is the line number to open vim at.'
      echo -ne '\033[1m'
      echo -n '  api_perl_preview'
      echo -n ' PROG'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TERM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Applies the provided perl program to matching notes to generate replacements.'
      echo '    Returns the potential replacements.'
      echo -ne '\033[1m'
      echo -n '  claude'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Opens a Claude Code session in the notes repository.'
      echo -ne '\033[1m'
      echo -n '  api_pushd'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Changes to the notes repository directory. (With pushd.)'
      ;;
    omdb)
      echo "Usage: q omdb FUNCTION [ARG...]"
      echo "OMDB (Open Movie Database) helpers for bash."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  set_key'
      echo -n ' KEY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Configure a new KEY for the OMDB API.'
      echo -ne '\033[1m'
      echo -n '  register_key'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Interactive prompt to configure the API key for OMDB.'
      echo -ne '\033[1m'
      echo -n '  get_key'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints the API key for OMDB.'
      echo -ne '\033[1m'
      echo -n '  query'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -f'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' QUERY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Query the OMDB API with the given query. Prints JSON to stdout. Results are'
      echo '    cached. Use -f to force a fresh query.'
      echo '    '
      echo '    The query consists of a series of PARAMETER=QUERY pairs. Valid parameters are'
      echo '    documented at http://www.omdbapi.com.'
      echo '    '
      echo '    Examples:'
      echo '    q omdb query "t=The Matrix"'
      echo '    q omdb query "i=tt0133093"'
      echo '    '
      echo '    Useful parameters include:'
      echo '    '
      echo '    - t: Title of the movie.'
      echo '    - i: IMDB ID of the movie.'
      echo -ne '\033[1m'
      echo -n '  guess_title'
      echo -ne '\033[91m'
      echo -n ' FILE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Guess the title of the movie based on the filename.'
      ;;
    path)
      echo "Usage: q path FUNCTION [ARG...]"
      echo "UNIX style path helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  expand'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Expands tilde, safely, in the path.'
      echo -ne '\033[1m'
      echo -n '  resolve'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints the absolute path of PATH, with any tilde interpolated.'
      echo -ne '\033[1m'
      echo -n '  push'
      echo -ne '\033[31m'
      echo -n ' DIRECTORY'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    This is like pushd, except it also updates the name of the screen window to'
      echo '    the new path, if run from inside a screen session.'
      echo -ne '\033[1m'
      echo -n '  pop'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    This is like popd, except it also updates the name of the screen window to the'
      echo '    new path, if run from inside a screen session.'
      ;;
    pkg)
      echo "Usage: q pkg FUNCTION [ARG...]"
      echo "Cross-platform package management."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  install_or_skip'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PACKAGE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Install packages using the system package manager, or skip, if the package is'
      echo '    already installed.'
      ;;
    python)
      echo "Usage: q python FUNCTION [ARG...]"
      echo "Python env management, python-shell FFI and Jupyter."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  venv'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -I|--install-requirements'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -p|--python-path'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -q|--quiet'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' VERSION'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias venv='q python venv'"
      echo -ne '\033[0m'
      echo '    Create a new virtualenv in the current directory, using the latest available'
      echo '    python version. If a virtualenv already exists, activate it. If -I is passed,'
      echo '    install requirements.txt. If -p is passed, use the specified Python binary. If'
      echo '    VERSION is passed, find a python binary with that version.'
      echo -ne '\033[1m'
      echo -n '  pip_run'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -p|--python-path'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -P|--package'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' PACKAGE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' EXE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ARGS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Run a Python script with the specified package installed.'
      echo -ne '\033[1m'
      echo -n '  ipynb'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -I|--install-requirements'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -p|--python-path'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' VERSION'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias ipynb='q python ipynb'"
      echo -ne '\033[0m'
      echo '    Creates a new virtualenv in the current directory (as venv) and opens a new'
      echo '    Jupyter notebook.'
      echo -ne '\033[1m'
      echo -n '  detect'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Find all available Python binaries in the PATH and their versions.'
      echo '    Prints a tab-separated list: VERSION  PATH  SHORT_VERSION'
      echo -ne '\033[1m'
      echo -n '  latest'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Returns the path to the latest available Python binary.'
      echo -ne '\033[1m'
      echo -n '  func'
      echo -n ' -f|--function'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' FUNCTION'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -p|--path'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -J|--json_output'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --clean'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --debug'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --quiet'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --no-venv'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ARGS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Run a Python function from a file. Calls `q python venv` to setup the'
      echo '    environment. The function must be defined in the file and must be a top-level'
      echo '    function. The function must be defined with type hints for all arguments.'
      echo '    '
      echo '    Function arguments are passed as positional arguments or keyword arguments.'
      echo '    Keyword arguments are passed as --KEY VALUE. Positional arguments are passed'
      echo '    after a single --.'
      echo '    '
      echo '    Example: python_func -f my_function -p my_file.py --kwarg val -- --arg1 arg2'
      echo '    '
      echo '    Arguments:'
      echo '    -f|--function: The name of the function to run.'
      echo '    -p|--path: The path to the Python file.'
      echo '    -J|--json-output: Serialize the output as JSON.'
      echo '    --clean: Delete the virtualenv after running the function.'
      echo '    --debug: Print the Python script that was executed.'
      echo '    --quiet: Do not print any output from the virtualenv creation.'
      echo '    --no-venv: Do not create a virtualenv.'
      echo -ne '\033[1m'
      echo -n '  black'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' FILES'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Run the black code formatter on the specified files.'
      ;;
    quick)
      echo "Usage: q quick FUNCTION [ARG...]"
      echo "Redshell function help, switch and autocomplete."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  rebuild'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --src-path'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -ne '\033[91m'
      echo -n ' PATH'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --skip-extra-paths'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  q'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    rust)
      echo "Usage: q rust FUNCTION [ARG...]"
      echo "Manage rust toolchain and environment."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  rustup'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  install_goodies'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    screen)
      echo "Usage: q screen FUNCTION [ARG...]"
      echo "UNIX style path helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  session'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  window'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  rename'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  home'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  reset_dirname'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    strings)
      echo "Usage: q strings FUNCTION [ARG...]"
      echo "String helpers for bash."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  urlencode'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Usage strings_urlencode STRING'
      echo '    '
      echo '    URL-encodes a string. DO NOT USE with curl: prefer --data-urlencode.'
      echo -ne '\033[1m'
      echo -n '  strip_control'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Strips terminal escape sequences from standard input.'
      echo -ne '\033[1m'
      echo -n '  repeat'
      echo -n ' STRING'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' N'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Prints STRING N times.'
      echo -ne '\033[1m'
      echo -n '  join'
      echo -n ' DELIMITER'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' STRING'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  sgrep'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -C'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' NUM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias sgrep='q strings sgrep'"
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  strip_prefix'
      echo -n ' PREFIX'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' STRING'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Strips the prefix from the string if it'"'"'s there.'
      echo -ne '\033[1m'
      echo -n '  trim'
      echo -n ' STRING'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Strips leading and trailing whitespace from a string.'
      echo -ne '\033[1m'
      echo -n '  elide'
      echo -n ' TEXT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' LIMIT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' COLOR'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Elides TEXT to LIMIT characters, inserting "(...)" in the middle if needed.'
      echo '    If COLOR is provided, it will be used to color the ellipsis.'
      echo -ne '\033[1m'
      echo -n '  strip_prefix'
      echo -n ' PREFIX'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' STRING'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Strips the prefix from the string if it'"'"'s there.'
      ;;
    time)
      echo "Usage: q time FUNCTION [ARG...]"
      echo "Time and date helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  zones'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    List all time zones know to the system. (In /usr/share/zoneinfo.)'
      echo '    '
      echo '    This doesn'"'"'t include aliases declared in this package.'
      echo -ne '\033[1m'
      echo -n '  get_tz'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  local'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  utc'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  in'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Usage time_in TIMEZONE [FORMAT]'
      echo '    '
      echo '    Sets the time zone to TIMEZONE and runs date with the remaining arguments.'
      echo '    Timezone resolution suppors fuzzy matching and aliases, so that cities like'
      echo '    San Francisco work as timezones.'
      echo -ne '\033[1m'
      echo -n '  tz_diff'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  ts'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  convert'
      echo -n ' TIME'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' FROM_TZ'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TO_TZ'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' FORMAT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    transit)
      echo "Usage: q transit FUNCTION [ARG...]"
      echo "Transit helpers."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  sbb'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    util)
      echo "Usage: q util FUNCTION [ARG...]"
      echo "Catch-all utility functions that don't fit anywhere else."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  ddu'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  sudo'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  reload'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  markdown'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  human_size'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -b|-bb|-S|-h|-hh'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' SIZE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Convert SIZE to human-readable format.'
      echo '    '
      echo '    -b: bits'
      echo '    -bb: SI units'
      echo '    -S: SI bytes'
      echo '    -h: base-2 bytes'
      echo '    -hh: base-2 bytes, no space between number and unit'
      echo '    '
      echo '    If no mode switch is specified then normal, base-2 byte units are used.'
      echo -ne '\033[1m'
      echo -n '  install_heroku_cli'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo "    alias heroku_install_cli='q util install_heroku_cli'"
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  install_bazelisk'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  jup'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  wait_for_file'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  forex'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -f'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' FROM'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -t'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' TO'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -d'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' DATE'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -a'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' AMOUNT'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' -v'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  run'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' --sudo'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' COMMAND'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ['
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ARGUMENTS'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ...'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n ' ]'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    xterm_colors)
      echo "Usage: q xterm_colors FUNCTION [ARG...]"
      echo "Work with the xterm color space, convert to RGB, etc."
      echo
      echo "Available functions:"
      echo -ne '\033[1m'
      echo -n '  channel_step'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Takes one RGB channel value as a 2-byte hex string and returns a decimal'
      echo '    number representing the step in XTERM_CHANNEL_STEPS that'"'"'s the closest.'
      echo -ne '\033[1m'
      echo -n '  greyscale_step'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    As channel_step, but for greyscale.'
      echo -ne '\033[1m'
      echo -n '  rgb_to_xterm'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Takes an RGB color as a 6-byte hex string and returns the closest xterm color.'
      echo -ne '\033[1m'
      echo -n '  hue_diff'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Computes the hue difference between two RGB colors passed as 6-byte hex'
      echo '    strings. Result is in the interval [0; 765]. Contrast values greater than ~400'
      echo '    are usually legible for text, if sufficient brightness contrast also exists.'
      echo '    (Depends on terminal.)'
      echo -ne '\033[1m'
      echo -n '  brightness'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Computes the brightness of an RGB color passed as a 6-byte hex string. Result'
      echo '    is in the interval [0; 255]. Brightness contrast of ~100 is usually legible if'
      echo '    sufficient hue contrast also exists. (Depends on terminal.)'
      echo -ne '\033[1m'
      echo -n '  contrast'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Computes a contrast value between two RGB colors passed as 6-byte hex strings.'
      echo '    Result is in the interval [0; 192]. Combines hue and brightness information.'
      echo '    Contrast values over 80 are usually legible, depending on terminal.'
      echo -ne '\033[1m'
      echo -n '  xterm_to_rgb'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo '    Takes an xterm color number as a decimal integer and returns a 6-byte hex of'
      echo '    the RGB color.'
      echo -ne '\033[1m'
      echo -n '  xterm_to_fg'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  xterm_to_bg'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  tfmt'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  color'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  shades'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      echo -ne '\033[1m'
      echo -n '  colors'
      echo
      echo -ne '\033[0m'
      echo -ne '\033[36m'
      echo -ne '\033[0m'
      ;;
    *)
      echo "Unknown module $1"
      return 1
      ;;
    esac
  fi
}
function __q_dump() {
  if [[ ! "$#" -eq 2 ]]; then
    echo "Usage: q dump MODULE FUNCTION"
    return 1
  fi
  case "$1" in
  ascii_art)
    case "$2" in
    print_speech_bubble)
      type print_speech_bubble
      ;;
    erase_lines)
      type erase_lines
      ;;
    cursor_position)
      type cursor_position
      ;;
    cursor_row)
      type cursor_row
      ;;
    print_bmo)
      type print_bmo
      ;;
    print_pedro)
      type print_pedro
      ;;
    scroll_output_pedro)
      type scroll_output_pedro
      ;;
    select_visual)
      type select_visual
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  bash)
    case "$2" in
    get_bash_functions)
      type get_bash_functions
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  browser)
    case "$2" in
    gdocs_id)
      type gdocs_id
      ;;
    sheets_dl_link)
      type sheets_dl_link
      ;;
    chrome_path)
      type chrome_path
      ;;
    downloads_path)
      type downloads_path
      ;;
    dl)
      type browser_dl
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  caldav)
    case "$2" in
    accounts)
      type caldav_accounts
      ;;
    __caldav_default_account)
      type __caldav_default_account
      ;;
    fetch)
      type caldav_fetch
      ;;
    agenda)
      type caldav_agenda
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  crypt)
    case "$2" in
    encrypt_symmetric)
      type encrypt_symmetric
      ;;
    decrypt_symmetric)
      type decrypt_symmetric
      ;;
    gen_github_keypair)
      type gen_github_keypair
      ;;
    package)
      type package
      ;;
    payloadify)
      type payloadify
      ;;
    downloadify)
      type downloadify
      ;;
    hash)
      type crypt_hash
      ;;
    selfsign)
      type crypt_selfsign
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  debian)
    case "$2" in
    setup)
      type debian_setup
      ;;
    install_or_skip)
      type debian_install_or_skip
      ;;
    install_imgcat)
      type debian_install_imgcat
      ;;
    setup_mc)
      type debian_setup_mc
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  fedora)
    case "$2" in
    setup)
      type fedora_setup
      ;;
    dnf_install_or_skip)
      type dnf_install_or_skip
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  file)
    case "$2" in
    mktemp)
      type file_mktemp
      ;;
    mtime)
      type file_mtime
      ;;
    age)
      type file_age
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  find)
    case "$2" in
    f)
      type f
      ;;
    __f_args)
      type __f_args
      ;;
    fcc)
      type fcc
      ;;
    fgo)
      type fgo
      ;;
    fjava)
      type fjava
      ;;
    faidl)
      type faidl
      ;;
    fd)
      type fd
      ;;
    replace)
      type find_replace
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  git)
    case "$2" in
    mkproject)
      type mkproject
      ;;
    ssh_init)
      type git_ssh_init
      ;;
    get_origin)
      type git_get_origin
      ;;
    master_branch)
      type git_master_branch
      ;;
    cherrypick_branch)
      type git_cherrypick_branch
      ;;
    sparse_clone)
      type git_sparse_clone
      ;;
    changed_lines)
      type git_changed_lines
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  go)
    case "$2" in
    pkg_do)
      type go_pkg_do
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  hg)
    case "$2" in
    root)
      type hg_root
      ;;
    repo_name)
      type hg_repo_name
      ;;
    branch_name)
      type hg_branch_name
      ;;
    ps1_widget)
      type hg_ps1_widget
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  init)
    case "$2" in
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  install)
    case "$2" in
    file)
      type install_file
      ;;
    reinstall_file)
      type reinstall_file
      ;;
    __install_file)
      type __install_file
      ;;
    __uninstall_file)
      type __uninstall_file
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  kagi)
    case "$2" in
    search_json)
      type kagi_search_json
      ;;
    summarize_json)
      type kagi_summarize_json
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  keys)
    case "$2" in
    git)
      type keys_git
      ;;
    path)
      type keys_path
      ;;
    var)
      type keys_var
      ;;
    key)
      type keys_key
      ;;
    flush)
      type keys_flush
      ;;
    sync)
      type keys_sync
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  mac)
    case "$2" in
    setup)
      type mac_setup
      ;;
    brew)
      type brew
      ;;
    reinstall_brew)
      type reinstall_brew
      ;;
    enable_ipconfig_verbose)
      type mac_enable_ipconfig_verbose
      ;;
    get_user_shell)
      type mac_get_user_shell
      ;;
    brew_bash_path)
      type mac_brew_bash_path
      ;;
    switch_to_bash)
      type mac_switch_to_bash
      ;;
    icloud)
      type icloud
      ;;
    icloud_evict)
      type icloud_evict
      ;;
    brew_install_or_skip)
      type brew_install_or_skip
      ;;
    install_miniconda)
      type mac_install_miniconda
      ;;
    install_devtools)
      type mac_install_devtools
      ;;
    kill_defender)
      type mac_kill_defender
      ;;
    suppress_defender)
      type mac_suppress_defender
      ;;
    kill_crashplan)
      type mac_kill_crashplan
      ;;
    hogs)
      type mac_hogs
      ;;
    cpu_hogs)
      type mac_cpu_hogs
      ;;
    cpulimit)
      type mac_cpulimit
      ;;
    disable_powernap)
      type mac_disable_powernap
      ;;
    power_stats)
      type mac_power_stats
      ;;
    fix_ssh_locale_config)
      type mac_fix_ssh_locale_config
      ;;
    pid_suspend)
      type mac_pid_suspend
      ;;
    setup_iterm2)
      type mac_setup_iterm2
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  media)
    case "$2" in
    yt-dl)
      type yt-dl
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  monitor)
    case "$2" in
    __load_stats_worker)
      type __load_stats_worker
      ;;
    __stream_tick)
      type __stream_tick
      ;;
    stream_load_stats)
      type stream_load_stats
      ;;
    __write_load_stats_worker)
      type __write_load_stats_worker
      ;;
    load_hist)
      type load_hist
      ;;
    latest_load_stats)
      type latest_load_stats
      ;;
    __parse_load_stats)
      type __parse_load_stats
      ;;
    write_load_stats)
      type write_load_stats
      ;;
    stream_top_stats)
      type stream_top_stats
      ;;
    __parse_top_header)
      type __parse_top_header
      ;;
    __parse_units)
      type __parse_units
      ;;
    __stream_net_stats_worker)
      type __stream_net_stats_worker
      ;;
    __parse_nettop)
      type __parse_nettop
      ;;
    stream_net_stats)
      type stream_net_stats
      ;;
    proc_stats)
      type proc_stats
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  mtg)
    case "$2" in
    __mtg_latest_scryfall_oracle_cards_uri)
      type __mtg_latest_scryfall_oracle_cards_uri
      ;;
    oracle_json)
      type mtg_oracle_json
      ;;
    rules)
      type mtg_rules
      ;;
    card_json)
      type mtg_card_json
      ;;
    __mtg_approx_match)
      type __mtg_approx_match
      ;;
    __colorize_mana)
      type __colorize_mana
      ;;
    __print_card)
      type __print_card
      ;;
    card)
      type mtg_card
      ;;
    __relevant_cards)
      type __relevant_cards
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  multiple_choice)
    case "$2" in
    __prompt)
      type __prompt
      ;;
    __multiple_choice)
      type __multiple_choice
      ;;
    multiple_choice)
      type multiple_choice
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  net)
    case "$2" in
    host)
      type net_host
      ;;
    dl)
      type net_dl
      ;;
    online)
      type net_online
      ;;
    cidr_to_netmask)
      type net_cidr_to_netmask
      ;;
    health)
      type net_health
      ;;
    ssh_fingerprint)
      type net_ssh_fingerprint
      ;;
    dump_cert)
      type net_dump_cert
      ;;
    ccurl)
      type net_ccurl
      ;;
    dataurl)
      type net_dataurl
      ;;
    undataurl)
      type net_undataurl
      ;;
    rtt)
      type net_rtt
      ;;
    ip4)
      type net_ip4
      ;;
    ip4gw)
      type net_ip4gw
      ;;
    serve)
      type net_serve
      ;;
    dump_url)
      type dump_url
      ;;
    wiki)
      type wiki
      ;;
    wifi_device)
      type wifi_device
      ;;
    wifi_name)
      type net_wifi_name
      ;;
    ssh_fingerprint)
      type net_ssh_fingerprint
      ;;
    ssh_aliases)
      type net_ssh_aliases
      ;;
    ssh_fqdn)
      type net_ssh_fqdn
      ;;
    wa_link)
      type net_wa_link
      ;;
    __net_gallery_ensure_venv)
      type __net_gallery_ensure_venv
      ;;
    gallery)
      type net_gallery
      ;;
    __net_write_static_ip4_dhcp_config_debian)
      type __net_write_static_ip4_dhcp_config_debian
      ;;
    __net_make_static_dhcp_ip4_config_debian)
      type __net_make_static_dhcp_ip4_config_debian
      ;;
    __net_get_ip4_config_debian)
      type __net_get_ip4_config_debian
      ;;
    __net_modified_static_dhcp4_config_debian)
      type __net_modified_static_dhcp4_config_debian
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  news)
    case "$2" in
    all)
      type news_all
      ;;
    stocks)
      type news_stocks
      ;;
    weather)
      type news_weather
      ;;
    brutalist_report_source)
      type news_brutalist_report_source
      ;;
    nytimes)
      type news_nytimes
      ;;
    npr)
      type news_npr
      ;;
    pbs)
      type news_pbs
      ;;
    register)
      type news_register
      ;;
    cnbc)
      type news_cnbc
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  notes)
    case "$2" in
    __elide)
      type __elide
      ;;
    __file_mtime_and_age)
      type __file_mtime_and_age
      ;;
    __notes_api_list_notes_batch)
      type __notes_api_list_notes_batch
      ;;
    note)
      type notes_note
      ;;
    list)
      type notes_list
      ;;
    sync)
      type notes_sync
      ;;
    todo)
      type notes_todo
      ;;
    undo)
      type notes_undo
      ;;
    perl)
      type notes_perl
      ;;
    api_list_notes)
      type notes_api_list_notes
      ;;
    __nonempty_wc_l)
      type __nonempty_wc_l
      ;;
    backup)
      type notes_backup
      ;;
    api_empty_notes)
      type notes_api_empty_notes
      ;;
    __date_add)
      type __date_add
      ;;
    __wday)
      type __wday
      ;;
    __date_sub)
      type __date_sub
      ;;
    __date_convert)
      type __date_convert
      ;;
    __wday_number)
      type __wday_number
      ;;
    __relative_moment)
      type __relative_moment
      ;;
    __when)
      type __when
      ;;
    __notes_api_list_todos_batch)
      type __notes_api_list_todos_batch
      ;;
    api_list_todos)
      type notes_api_list_todos
      ;;
    print_todo_categories)
      type print_todo_categories
      ;;
    __todo_context_emoji)
      type __todo_context_emoji
      ;;
    __select_todo)
      type __select_todo
      ;;
    api_git)
      type notes_api_git
      ;;
    api_pushd)
      type notes_api_pushd
      ;;
    api_clone)
      type notes_api_clone
      ;;
    __fix_mtime_from_git)
      type __fix_mtime_from_git
      ;;
    api_fsck)
      type notes_api_fsck
      ;;
    __date_unit)
      type __date_unit
      ;;
    __parse_age)
      type __parse_age
      ;;
    nw)
      type nw
      ;;
    window)
      type notes_window
      ;;
    api_find)
      type notes_api_find
      ;;
    api_quick_title)
      type notes_api_quick_title
      ;;
    __notes_filename)
      type __notes_filename
      ;;
    log)
      type notes_log
      ;;
    __match_files_one)
      type __match_files_one
      ;;
    __match_files_all)
      type __match_files_all
      ;;
    __match_files_regex)
      type __match_files_regex
      ;;
    api_match_files)
      type notes_api_match_files
      ;;
    __todo_title)
      type __todo_title
      ;;
    __notes_title)
      type __notes_title
      ;;
    __notes_category)
      type __notes_category
      ;;
    __preamble)
      type __preamble
      ;;
    ls)
      type notes_ls
      ;;
    hist)
      type notes_hist
      ;;
    api_drop_note)
      type notes_api_drop_note
      ;;
    __notes_gen)
      type __notes_gen
      ;;
    gc)
      type notes_gc
      ;;
    api_update_note)
      type notes_api_update_note
      ;;
    api_edit_note)
      type notes_api_edit_note
      ;;
    __notes_api_perl_preview_batch)
      type __notes_api_perl_preview_batch
      ;;
    api_perl_preview)
      type notes_api_perl_preview
      ;;
    __nperl_render_preview)
      type __nperl_render_preview
      ;;
    __nperl_apply)
      type __nperl_apply
      ;;
    claude)
      type notes_claude
      ;;
    api_pushd)
      type notes_api_pushd
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  omdb)
    case "$2" in
    __omdb_key_path)
      type __omdb_key_path
      ;;
    set_key)
      type omdb_set_key
      ;;
    register_key)
      type omdb_register_key
      ;;
    get_key)
      type omdb_get_key
      ;;
    __omdb_query_string)
      type __omdb_query_string
      ;;
    query)
      type omdb_query
      ;;
    guess_title)
      type omdb_guess_title
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  path)
    case "$2" in
    expand)
      type path_expand
      ;;
    resolve)
      type path_resolve
      ;;
    push)
      type path_push
      ;;
    pop)
      type path_pop
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  pkg)
    case "$2" in
    install_or_skip)
      type pkg_install_or_skip
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  python)
    case "$2" in
    __python_ensurepip)
      type __python_ensurepip
      ;;
    __python_ensurevenv)
      type __python_ensurevenv
      ;;
    __fix_stupid_virtualenv_behavior)
      type __fix_stupid_virtualenv_behavior
      ;;
    venv)
      type python_venv
      ;;
    pip_run)
      type python_pip_run
      ;;
    ipynb)
      type python_ipynb
      ;;
    detect)
      type python_detect
      ;;
    latest)
      type python_latest
      ;;
    func)
      type python_func
      ;;
    black)
      type python_black
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  quick)
    case "$2" in
    __quick_build_all)
      type __quick_build_all
      ;;
    rebuild)
      type quick_rebuild
      ;;
    q)
      type q
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  rust)
    case "$2" in
    rustup)
      type rustup
      ;;
    install_goodies)
      type rust_install_goodies
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  screen)
    case "$2" in
    session)
      type screen_session
      ;;
    window)
      type screen_window
      ;;
    rename)
      type screen_rename
      ;;
    home)
      type screen_home
      ;;
    reset_dirname)
      type screen_reset_dirname
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  strings)
    case "$2" in
    urlencode)
      type strings_urlencode
      ;;
    strip_control)
      type strings_strip_control
      ;;
    repeat)
      type strings_repeat
      ;;
    join)
      type strings_join
      ;;
    sgrep)
      type strings_sgrep
      ;;
    strip_prefix)
      type strings_strip_prefix
      ;;
    trim)
      type strings_trim
      ;;
    elide)
      type strings_elide
      ;;
    strip_prefix)
      type strings_strip_prefix
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  time)
    case "$2" in
    zones)
      type time_zones
      ;;
    __time_get_tz_alias)
      type __time_get_tz_alias
      ;;
    __time_get_tz)
      type __time_get_tz
      ;;
    get_tz)
      type time_get_tz
      ;;
    local)
      type time_local
      ;;
    utc)
      type time_utc
      ;;
    in)
      type time_in
      ;;
    tz_diff)
      type time_tz_diff
      ;;
    ts)
      type time_ts
      ;;
    convert)
      type time_convert
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  transit)
    case "$2" in
    sbb)
      type transit_sbb
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  util)
    case "$2" in
    ddu)
      type util_ddu
      ;;
    sudo)
      type util_sudo
      ;;
    reload)
      type reload
      ;;
    markdown)
      type util_markdown
      ;;
    human_size)
      type human_size
      ;;
    install_heroku_cli)
      type install_heroku_cli
      ;;
    install_bazelisk)
      type install_bazelisk
      ;;
    jup)
      type jup
      ;;
    wait_for_file)
      type wait_for_file
      ;;
    forex)
      type util_forex
      ;;
    run)
      type util_run
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  xterm_colors)
    case "$2" in
    channel_step)
      type channel_step
      ;;
    greyscale_step)
      type greyscale_step
      ;;
    rgb_to_xterm)
      type rgb_to_xterm
      ;;
    hue_diff)
      type hue_diff
      ;;
    brightness)
      type brightness
      ;;
    contrast)
      type contrast
      ;;
    xterm_to_rgb)
      type xterm_to_rgb
      ;;
    xterm_to_fg)
      type xterm_to_fg
      ;;
    xterm_to_bg)
      type xterm_to_bg
      ;;
    tfmt)
      type tfmt
      ;;
    color)
      type color
      ;;
    shades)
      type shades
      ;;
    colors)
      type colors
      ;;
    *)
      echo "Unknown function $2"
      return 1
      ;;
    esac
    ;;
  *)
    echo "Unknown module $1"
    return 1
    ;;
  esac
}

# Complete a value based on its type.
# Usage: __q_complete_type TYPE CUR
function __q_complete_type() {
  local type="$1" cur="$2"
  case "${type}" in
  FILE)
    COMPREPLY+=($(compgen -A file -- "${cur}"))
    ;;
  DIRECTORY)
    COMPREPLY+=($(compgen -A directory -- "${cur}"))
    ;;
  USER)
    COMPREPLY+=($(compgen -A user -- "${cur}"))
    ;;
  GROUP)
    COMPREPLY+=($(compgen -A group -- "${cur}"))
    ;;
  HOSTNAME)
    COMPREPLY+=($(compgen -A hostname -- "${cur}"))
    if [[ -f ~/.ssh/config ]]; then
      COMPREPLY+=($(compgen -W "$(grep -i '^Host ' ~/.ssh/config 2>/dev/null | awk '{print $2}' | grep -v '[*?]')" -- "${cur}"))
    fi
    ;;
  STRING|DEFAULT)
    ;;
  *)
    COMPREPLY+=($(compgen -A file -- "${cur}"))
    ;;
  esac
}

# Complete function arguments by walking COMP_WORDS to determine state.
#
# At each position, we either suggest the name of the next --flag, or a
# value for a positional argument or the previous --flag. Multiple cases
# can be active at the same time; their suggestions are combined:
#
# 1. If CWORD=3 or the previous word was a SWITCH or a positional value,
#    we are in EXPECT_ARG state and should suggest flag names.
#
# 2. If the previous word was a KEYWORD (flag that takes a value), we are
#    in EXPECT_VALUE state and should suggest values of the keyword's type.
#
# 3. If there is a positional argument at the current position, we also
#    suggest values for that argument (combined with flag names from #1).
#
# Usage: __q_complete_func SWITCHES KEYWORDS KEYWORD_TYPES POSITIONAL_TYPES
#   SWITCHES: space-separated switch names (flags that take no value)
#   KEYWORDS: space-separated keyword names (flags that take a value)
#   KEYWORD_TYPES: colon-separated name:TYPE pairs for keywords
#   POSITIONAL_TYPES: space-separated types for positional args
function __q_complete_func() {
  local switches="$1" keywords="$2" keyword_types="$3" positional_types_str="$4"
  local cur="${COMP_WORDS[COMP_CWORD]}"
  local i=3 pos=0 state=EXPECT_ARG
  local -a positional_types=(${positional_types_str})

  # Walk through previous args to determine current state
  while [[ "${i}" -lt "${COMP_CWORD}" ]]; do
    local word="${COMP_WORDS[i]}"
    case "${state}" in
    EXPECT_ARG)
      if [[ "${word}" == "--" ]]; then
        state=IDK
      elif [[ " ${keywords} " == *" ${word} "* ]]; then
        # This is a keyword arg, next word is its value
        local ktype
        for pair in ${keyword_types}; do
          if [[ "${pair%%:*}" == "${word}" ]]; then
            ktype="${pair#*:}"
            break
          fi
        done
        state="EXPECT_VALUE_${ktype:-STRING}"
      elif [[ " ${switches} " == *" ${word} "* ]]; then
        state=EXPECT_ARG
      elif [[ "${word}" != -* ]]; then
        # Positional argument consumed
        (( pos++ ))
        state=EXPECT_ARG
      else
        state=EXPECT_ARG
      fi
      ;;
    EXPECT_VALUE_*)
      # Value consumed, back to expecting args
      state=EXPECT_ARG
      ;;
    IDK)
      break
      ;;
    esac
    (( i++ ))
  done

  COMPREPLY=()
  case "${state}" in
  EXPECT_ARG)
    # Suggest switches and keywords
    COMPREPLY+=($(compgen -W "${switches} ${keywords}" -- "${cur}"))
    # Also complete positional arg if available
    if [[ -n "${positional_types[$pos]}" ]]; then
      __q_complete_type "${positional_types[$pos]}" "${cur}"
    fi
    ;;
  EXPECT_VALUE_*)
    __q_complete_type "${state#EXPECT_VALUE_}" "${cur}"
    ;;
  IDK)
    COMPREPLY+=($(compgen -W "${switches} ${keywords}" -- "${cur}"))
    COMPREPLY+=($(compgen -A file -- "${cur}"))
    ;;
  esac
}

function __q_compgen() {
  local modules="ascii_art bash browser caldav crypt debian fedora file find git go hg init install kagi keys mac media monitor mtg multiple_choice net news notes omdb path pkg python quick rust screen strings time transit util xterm_colors"
  case "${COMP_CWORD}" in
  1)
    COMPREPLY=($(compgen -W "help ${modules}" -- ${COMP_WORDS[COMP_CWORD]}))
    return 0
  ;;
  2)
    case "${COMP_WORDS[1]}" in
    ascii_art)
      COMPREPLY=($(compgen -W "help print_speech_bubble erase_lines cursor_position cursor_row print_bmo print_pedro scroll_output_pedro select_visual" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    bash)
      COMPREPLY=($(compgen -W "help get_bash_functions" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    browser)
      COMPREPLY=($(compgen -W "help gdocs_id sheets_dl_link chrome_path downloads_path dl" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    caldav)
      COMPREPLY=($(compgen -W "help accounts fetch agenda" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    crypt)
      COMPREPLY=($(compgen -W "help encrypt_symmetric decrypt_symmetric gen_github_keypair package payloadify downloadify hash selfsign" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    debian)
      COMPREPLY=($(compgen -W "help setup install_or_skip install_imgcat setup_mc" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    fedora)
      COMPREPLY=($(compgen -W "help setup dnf_install_or_skip" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    file)
      COMPREPLY=($(compgen -W "help mktemp mtime age" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    find)
      COMPREPLY=($(compgen -W "help f fcc fgo fjava faidl fd replace" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    git)
      COMPREPLY=($(compgen -W "help mkproject ssh_init get_origin master_branch cherrypick_branch sparse_clone changed_lines" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    go)
      COMPREPLY=($(compgen -W "help pkg_do" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    hg)
      COMPREPLY=($(compgen -W "help root repo_name branch_name ps1_widget" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    init)
      COMPREPLY=($(compgen -W "help " -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    install)
      COMPREPLY=($(compgen -W "help file reinstall_file" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    kagi)
      COMPREPLY=($(compgen -W "help search_json summarize_json" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    keys)
      COMPREPLY=($(compgen -W "help git path var key flush sync" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    mac)
      COMPREPLY=($(compgen -W "help setup brew reinstall_brew enable_ipconfig_verbose get_user_shell brew_bash_path switch_to_bash icloud icloud_evict brew_install_or_skip install_miniconda install_devtools kill_defender suppress_defender kill_crashplan hogs cpu_hogs cpulimit disable_powernap power_stats fix_ssh_locale_config pid_suspend setup_iterm2" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    media)
      COMPREPLY=($(compgen -W "help yt-dl" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    monitor)
      COMPREPLY=($(compgen -W "help stream_load_stats load_hist latest_load_stats write_load_stats stream_top_stats stream_net_stats proc_stats" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    mtg)
      COMPREPLY=($(compgen -W "help oracle_json rules card_json card" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    multiple_choice)
      COMPREPLY=($(compgen -W "help multiple_choice" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    net)
      COMPREPLY=($(compgen -W "help host dl online cidr_to_netmask health ssh_fingerprint dump_cert ccurl dataurl undataurl rtt ip4 ip4gw serve dump_url wiki wifi_device wifi_name ssh_fingerprint ssh_aliases ssh_fqdn wa_link gallery" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    news)
      COMPREPLY=($(compgen -W "help all stocks weather brutalist_report_source nytimes npr pbs register cnbc" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    notes)
      COMPREPLY=($(compgen -W "help note list sync todo undo perl api_list_notes backup api_empty_notes api_list_todos print_todo_categories api_git api_pushd api_clone api_fsck nw window api_find api_quick_title log api_match_files ls hist api_drop_note gc api_update_note api_edit_note api_perl_preview claude api_pushd" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    omdb)
      COMPREPLY=($(compgen -W "help set_key register_key get_key query guess_title" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    path)
      COMPREPLY=($(compgen -W "help expand resolve push pop" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    pkg)
      COMPREPLY=($(compgen -W "help install_or_skip" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    python)
      COMPREPLY=($(compgen -W "help venv pip_run ipynb detect latest func black" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    quick)
      COMPREPLY=($(compgen -W "help rebuild q" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    rust)
      COMPREPLY=($(compgen -W "help rustup install_goodies" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    screen)
      COMPREPLY=($(compgen -W "help session window rename home reset_dirname" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    strings)
      COMPREPLY=($(compgen -W "help urlencode strip_control repeat join sgrep strip_prefix trim elide strip_prefix" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    time)
      COMPREPLY=($(compgen -W "help zones get_tz local utc in tz_diff ts convert" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    transit)
      COMPREPLY=($(compgen -W "help sbb" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    util)
      COMPREPLY=($(compgen -W "help ddu sudo reload markdown human_size install_heroku_cli install_bazelisk jup wait_for_file forex run" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    xterm_colors)
      COMPREPLY=($(compgen -W "help channel_step greyscale_step rgb_to_xterm hue_diff brightness contrast xterm_to_rgb xterm_to_fg xterm_to_bg tfmt color shades colors" -- ${COMP_WORDS[COMP_CWORD]}))
      return 0
      ;;
    esac
    ;;
  *)
    case "${COMP_WORDS[1]}" in
    ascii_art)
      case "${COMP_WORDS[2]}" in
      print_speech_bubble)
        __q_complete_func "" "" "" ""
        ;;
      erase_lines)
        __q_complete_func "" "" "" ""
        ;;
      cursor_position)
        __q_complete_func "" "" "" ""
        ;;
      cursor_row)
        __q_complete_func "" "" "" ""
        ;;
      print_bmo)
        __q_complete_func "" "" "" ""
        ;;
      print_pedro)
        __q_complete_func "" "" "" ""
        ;;
      scroll_output_pedro)
        __q_complete_func "" "" "" ""
        ;;
      select_visual)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    bash)
      case "${COMP_WORDS[2]}" in
      get_bash_functions)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    browser)
      case "${COMP_WORDS[2]}" in
      gdocs_id)
        __q_complete_func "" "" "" "STRING"
        ;;
      sheets_dl_link)
        __q_complete_func "" "" "" ""
        ;;
      chrome_path)
        __q_complete_func "" "" "" ""
        ;;
      downloads_path)
        __q_complete_func "" "" "" ""
        ;;
      dl)
        __q_complete_func "" "" "" "STRING"
        ;;
      esac
      ;;
    caldav)
      case "${COMP_WORDS[2]}" in
      accounts)
        __q_complete_func "" "" "" ""
        ;;
      fetch)
        __q_complete_func "" "-a --account -u --username" "-a:STRING --account:STRING -u:USER --username:USER" "STRING"
        ;;
      agenda)
        __q_complete_func "" "-a --account -u --username -d --days" "-a:STRING --account:STRING -u:USER --username:USER -d:STRING --days:STRING" "STRING"
        ;;
      esac
      ;;
    crypt)
      case "${COMP_WORDS[2]}" in
      encrypt_symmetric)
        __q_complete_func "" "" "" "FILE"
        ;;
      decrypt_symmetric)
        __q_complete_func "" "" "" "FILE"
        ;;
      gen_github_keypair)
        __q_complete_func "" "" "" ""
        ;;
      package)
        __q_complete_func "" "" "" ""
        ;;
      payloadify)
        __q_complete_func "" "" "" "FILE"
        ;;
      downloadify)
        __q_complete_func "" "" "" "FILE"
        ;;
      hash)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      selfsign)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      esac
      ;;
    debian)
      case "${COMP_WORDS[2]}" in
      setup)
        __q_complete_func "" "" "" ""
        ;;
      install_or_skip)
        __q_complete_func "" "" "" ""
        ;;
      install_imgcat)
        __q_complete_func "" "" "" ""
        ;;
      setup_mc)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    fedora)
      case "${COMP_WORDS[2]}" in
      setup)
        __q_complete_func "" "" "" ""
        ;;
      dnf_install_or_skip)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      esac
      ;;
    file)
      case "${COMP_WORDS[2]}" in
      mktemp)
        __q_complete_func "" "" "" "STRING"
        ;;
      mtime)
        __q_complete_func "" "-g" "-g:FILE" ""
        ;;
      age)
        __q_complete_func "" "-s" "-s:FILE" ""
        ;;
      esac
      ;;
    find)
      case "${COMP_WORDS[2]}" in
      f)
        __q_complete_func "" "" "" ""
        ;;
      fcc)
        __q_complete_func "" "" "" ""
        ;;
      fgo)
        __q_complete_func "" "" "" ""
        ;;
      fjava)
        __q_complete_func "" "" "" ""
        ;;
      faidl)
        __q_complete_func "" "" "" ""
        ;;
      fd)
        __q_complete_func "" "" "" ""
        ;;
      replace)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    git)
      case "${COMP_WORDS[2]}" in
      mkproject)
        __q_complete_func "" "" "" ""
        ;;
      ssh_init)
        __q_complete_func "" "" "" ""
        ;;
      get_origin)
        __q_complete_func "" "" "" ""
        ;;
      master_branch)
        __q_complete_func "" "" "" ""
        ;;
      cherrypick_branch)
        __q_complete_func "" "" "" ""
        ;;
      sparse_clone)
        __q_complete_func "" "-b -p" "-b:STRING -p:FILE" "STRING DIRECTORY"
        ;;
      changed_lines)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    go)
      case "${COMP_WORDS[2]}" in
      pkg_do)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    hg)
      case "${COMP_WORDS[2]}" in
      root)
        __q_complete_func "" "" "" ""
        ;;
      repo_name)
        __q_complete_func "" "" "" ""
        ;;
      branch_name)
        __q_complete_func "" "" "" ""
        ;;
      ps1_widget)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    install)
      case "${COMP_WORDS[2]}" in
      file)
        __q_complete_func "-d --append --uninstall" "-s --sfile -d --dfile -c --char -k --section" "-s:FILE --sfile:FILE -d:FILE --dfile:FILE -c:STRING --char:STRING -k:STRING --section:STRING" ""
        ;;
      reinstall_file)
        __q_complete_func "" "" "" "FILE FILE STRING STRING"
        ;;
      esac
      ;;
    kagi)
      case "${COMP_WORDS[2]}" in
      search_json)
        __q_complete_func "" "" "" ""
        ;;
      summarize_json)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    keys)
      case "${COMP_WORDS[2]}" in
      git)
        __q_complete_func "" "" "" "STRING"
        ;;
      path)
        __q_complete_func "" "-f" "-f:STRING" ""
        ;;
      var)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      key)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      flush)
        __q_complete_func "" "" "" ""
        ;;
      sync)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    mac)
      case "${COMP_WORDS[2]}" in
      setup)
        __q_complete_func "" "" "" ""
        ;;
      brew)
        __q_complete_func "" "" "" ""
        ;;
      reinstall_brew)
        __q_complete_func "" "" "" ""
        ;;
      enable_ipconfig_verbose)
        __q_complete_func "" "" "" ""
        ;;
      get_user_shell)
        __q_complete_func "" "" "" ""
        ;;
      brew_bash_path)
        __q_complete_func "" "" "" ""
        ;;
      switch_to_bash)
        __q_complete_func "" "" "" ""
        ;;
      icloud)
        __q_complete_func "" "" "" ""
        ;;
      icloud_evict)
        __q_complete_func "" "" "" ""
        ;;
      brew_install_or_skip)
        __q_complete_func "" "" "" ""
        ;;
      install_miniconda)
        __q_complete_func "" "" "" ""
        ;;
      install_devtools)
        __q_complete_func "" "" "" ""
        ;;
      kill_defender)
        __q_complete_func "" "" "" ""
        ;;
      suppress_defender)
        __q_complete_func "" "" "" ""
        ;;
      kill_crashplan)
        __q_complete_func "" "" "" ""
        ;;
      hogs)
        __q_complete_func "" "" "" ""
        ;;
      cpu_hogs)
        __q_complete_func "" "--current --lifetime" "--current:STRING --lifetime:STRING" ""
        ;;
      cpulimit)
        __q_complete_func "" "" "" "STRING STRING STRING"
        ;;
      disable_powernap)
        __q_complete_func "" "" "" ""
        ;;
      power_stats)
        __q_complete_func "" "" "" ""
        ;;
      fix_ssh_locale_config)
        __q_complete_func "" "" "" ""
        ;;
      pid_suspend)
        __q_complete_func "" "--resume --suspend" "--resume:STRING --suspend:STRING" ""
        ;;
      setup_iterm2)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    media)
      case "${COMP_WORDS[2]}" in
      yt-dl)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      esac
      ;;
    monitor)
      case "${COMP_WORDS[2]}" in
      stream_load_stats)
        __q_complete_func "" "" "" ""
        ;;
      load_hist)
        __q_complete_func "" "" "" ""
        ;;
      latest_load_stats)
        __q_complete_func "" "" "" ""
        ;;
      write_load_stats)
        __q_complete_func "" "" "" ""
        ;;
      stream_top_stats)
        __q_complete_func "" "" "" ""
        ;;
      stream_net_stats)
        __q_complete_func "" "" "" ""
        ;;
      proc_stats)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    mtg)
      case "${COMP_WORDS[2]}" in
      oracle_json)
        __q_complete_func "" "" "" ""
        ;;
      rules)
        __q_complete_func "" "" "" ""
        ;;
      card_json)
        __q_complete_func "" "" "" "STRING"
        ;;
      card)
        __q_complete_func "" "" "" "STRING"
        ;;
      esac
      ;;
    multiple_choice)
      case "${COMP_WORDS[2]}" in
      multiple_choice)
        __q_complete_func "-n -L -N" "-i -p -m -a -I -A -H" "-i:STRING -p:STRING -m:STRING -a:STRING -I:STRING -A:STRING -H:STRING" ""
        ;;
      esac
      ;;
    net)
      case "${COMP_WORDS[2]}" in
      host)
        __q_complete_func "" "-l --port -u --username -P --password -C certfile --keyfile" "-l:STRING --port:STRING -u:USER --username:USER -P:STRING --password:STRING -C:FILE certfile:FILE --keyfile:FILE" "DIRECTORY"
        ;;
      dl)
        __q_complete_func "" "" "" "STRING"
        ;;
      online)
        __q_complete_func "" "" "" ""
        ;;
      cidr_to_netmask)
        __q_complete_func "" "" "" "STRING"
        ;;
      health)
        __q_complete_func "" "" "" ""
        ;;
      ssh_fingerprint)
        __q_complete_func "" "" "" ""
        ;;
      dump_cert)
        __q_complete_func "" "" "" ""
        ;;
      ccurl)
        __q_complete_func "" "-M --max-age -K --key --" "-M:STRING --max-age:STRING -K:STRING --key:STRING --:STRING" ""
        ;;
      dataurl)
        __q_complete_func "" "" "" "FILE"
        ;;
      undataurl)
        __q_complete_func "" "" "" ""
        ;;
      rtt)
        __q_complete_func "" "" "" "HOSTNAME"
        ;;
      ip4)
        __q_complete_func "" "" "" ""
        ;;
      ip4gw)
        __q_complete_func "" "" "" ""
        ;;
      serve)
        __q_complete_func "" "-l" "-l:STRING" "FILE"
        ;;
      dump_url)
        __q_complete_func "" "" "" ""
        ;;
      wiki)
        __q_complete_func "" "" "" ""
        ;;
      wifi_device)
        __q_complete_func "" "" "" ""
        ;;
      wifi_name)
        __q_complete_func "" "" "" ""
        ;;
      ssh_fingerprint)
        __q_complete_func "" "" "" "HOSTNAME"
        ;;
      ssh_aliases)
        __q_complete_func "" "" "" ""
        ;;
      ssh_fqdn)
        __q_complete_func "" "" "" "STRING"
        ;;
      wa_link)
        __q_complete_func "" "" "" "STRING"
        ;;
      gallery)
        __q_complete_func "--dedupe --scan-only --serve-only --force --clean" "--copy-to --title -l --port -u --username -P --password -C --certfile --keyfile" "--copy-to:DIRECTORY --title:STRING -l:STRING --port:STRING -u:USER --username:USER -P:STRING --password:STRING -C:FILE --certfile:FILE --keyfile:FILE" "DIRECTORY"
        ;;
      esac
      ;;
    news)
      case "${COMP_WORDS[2]}" in
      all)
        __q_complete_func "" "" "" ""
        ;;
      stocks)
        __q_complete_func "" "" "" ""
        ;;
      weather)
        __q_complete_func "" "" "" ""
        ;;
      brutalist_report_source)
        __q_complete_func "" "" "" ""
        ;;
      nytimes)
        __q_complete_func "" "" "" ""
        ;;
      npr)
        __q_complete_func "" "" "" ""
        ;;
      pbs)
        __q_complete_func "" "" "" ""
        ;;
      register)
        __q_complete_func "" "" "" ""
        ;;
      cnbc)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    notes)
      case "${COMP_WORDS[2]}" in
      note)
        __q_complete_func "" "" "" "STRING"
        ;;
      list)
        __q_complete_func "" "" "" ""
        ;;
      sync)
        __q_complete_func "" "" "" ""
        ;;
      todo)
        __q_complete_func "" "" "" "STRING"
        ;;
      undo)
        __q_complete_func "-f" "" "" ""
        ;;
      perl)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      api_list_notes)
        __q_complete_func "-f" "-a" "-a:STRING" ""
        ;;
      backup)
        __q_complete_func "" "" "" ""
        ;;
      api_empty_notes)
        __q_complete_func "" "" "" ""
        ;;
      api_list_todos)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      print_todo_categories)
        __q_complete_func "" "" "" ""
        ;;
      api_git)
        __q_complete_func "" "" "" "STRING"
        ;;
      api_pushd)
        __q_complete_func "" "" "" ""
        ;;
      api_clone)
        __q_complete_func "" "" "" ""
        ;;
      api_fsck)
        __q_complete_func "" "" "" ""
        ;;
      nw)
        __q_complete_func "" "" "" ""
        ;;
      window)
        __q_complete_func "" "" "" ""
        ;;
      api_find)
        __q_complete_func "" "" "" ""
        ;;
      api_quick_title)
        __q_complete_func "" "" "" ""
        ;;
      log)
        __q_complete_func "" "" "" ""
        ;;
      api_match_files)
        __q_complete_func "" "" "" ""
        ;;
      ls)
        __q_complete_func "" "" "" "STRING"
        ;;
      hist)
        __q_complete_func "" "" "" "STRING"
        ;;
      api_drop_note)
        __q_complete_func "" "" "" "STRING"
        ;;
      gc)
        __q_complete_func "" "" "" ""
        ;;
      api_update_note)
        __q_complete_func "" "" "" "FILE STRING"
        ;;
      api_edit_note)
        __q_complete_func "" "" "" "FILE STRING"
        ;;
      api_perl_preview)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      claude)
        __q_complete_func "" "" "" ""
        ;;
      api_pushd)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    omdb)
      case "${COMP_WORDS[2]}" in
      set_key)
        __q_complete_func "" "" "" "STRING"
        ;;
      register_key)
        __q_complete_func "" "" "" ""
        ;;
      get_key)
        __q_complete_func "" "" "" ""
        ;;
      query)
        __q_complete_func "" "-f" "-f:STRING" ""
        ;;
      guess_title)
        __q_complete_func "" "" "" "FILE"
        ;;
      esac
      ;;
    path)
      case "${COMP_WORDS[2]}" in
      expand)
        __q_complete_func "" "" "" "FILE"
        ;;
      resolve)
        __q_complete_func "" "" "" "FILE"
        ;;
      push)
        __q_complete_func "" "" "" "DIRECTORY"
        ;;
      pop)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    pkg)
      case "${COMP_WORDS[2]}" in
      install_or_skip)
        __q_complete_func "" "" "" "STRING"
        ;;
      esac
      ;;
    python)
      case "${COMP_WORDS[2]}" in
      venv)
        __q_complete_func "-I --install-requirements" "-p --python-path -q --quiet" "-p:FILE --python-path:FILE -q:STRING --quiet:STRING" ""
        ;;
      pip_run)
        __q_complete_func "" "-p --python-path -P --package" "-p:FILE --python-path:FILE -P:STRING --package:STRING" "STRING STRING"
        ;;
      ipynb)
        __q_complete_func "-I --install-requirements" "-p --python-path" "-p:FILE --python-path:FILE" "STRING"
        ;;
      detect)
        __q_complete_func "" "" "" ""
        ;;
      latest)
        __q_complete_func "" "" "" ""
        ;;
      func)
        __q_complete_func "-J --json_output --clean --debug --quiet --no-venv" "-f --function -p --path --" "-f:STRING --function:STRING -p:FILE --path:FILE --:STRING" ""
        ;;
      black)
        __q_complete_func "" "" "" "FILE"
        ;;
      esac
      ;;
    quick)
      case "${COMP_WORDS[2]}" in
      rebuild)
        __q_complete_func "--skip-extra-paths" "--src-path" "--src-path:FILE" ""
        ;;
      q)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    rust)
      case "${COMP_WORDS[2]}" in
      rustup)
        __q_complete_func "" "" "" ""
        ;;
      install_goodies)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    screen)
      case "${COMP_WORDS[2]}" in
      session)
        __q_complete_func "" "" "" ""
        ;;
      window)
        __q_complete_func "" "" "" ""
        ;;
      rename)
        __q_complete_func "" "" "" ""
        ;;
      home)
        __q_complete_func "" "" "" ""
        ;;
      reset_dirname)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    strings)
      case "${COMP_WORDS[2]}" in
      urlencode)
        __q_complete_func "" "" "" ""
        ;;
      strip_control)
        __q_complete_func "" "" "" ""
        ;;
      repeat)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      join)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      sgrep)
        __q_complete_func "" "-C" "-C:STRING" ""
        ;;
      strip_prefix)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      trim)
        __q_complete_func "" "" "" "STRING"
        ;;
      elide)
        __q_complete_func "" "" "" "STRING STRING STRING"
        ;;
      strip_prefix)
        __q_complete_func "" "" "" "STRING STRING"
        ;;
      esac
      ;;
    time)
      case "${COMP_WORDS[2]}" in
      zones)
        __q_complete_func "" "" "" ""
        ;;
      get_tz)
        __q_complete_func "" "" "" ""
        ;;
      local)
        __q_complete_func "" "" "" ""
        ;;
      utc)
        __q_complete_func "" "" "" ""
        ;;
      in)
        __q_complete_func "" "" "" ""
        ;;
      tz_diff)
        __q_complete_func "" "" "" ""
        ;;
      ts)
        __q_complete_func "" "" "" ""
        ;;
      convert)
        __q_complete_func "" "" "" "STRING STRING STRING STRING"
        ;;
      esac
      ;;
    transit)
      case "${COMP_WORDS[2]}" in
      sbb)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    util)
      case "${COMP_WORDS[2]}" in
      ddu)
        __q_complete_func "" "" "" ""
        ;;
      sudo)
        __q_complete_func "" "" "" ""
        ;;
      reload)
        __q_complete_func "" "" "" ""
        ;;
      markdown)
        __q_complete_func "" "" "" ""
        ;;
      human_size)
        __q_complete_func "" "-b -bb -S -h -hh" "-b:STRING -bb:STRING -S:STRING -h:STRING -hh:STRING" ""
        ;;
      install_heroku_cli)
        __q_complete_func "" "" "" ""
        ;;
      install_bazelisk)
        __q_complete_func "" "" "" ""
        ;;
      jup)
        __q_complete_func "" "" "" ""
        ;;
      wait_for_file)
        __q_complete_func "" "" "" ""
        ;;
      forex)
        __q_complete_func "-v" "-f -t -d -a" "-f:STRING -t:STRING -d:STRING -a:STRING" ""
        ;;
      run)
        __q_complete_func "" "--sudo" "--sudo:STRING" "STRING"
        ;;
      esac
      ;;
    xterm_colors)
      case "${COMP_WORDS[2]}" in
      channel_step)
        __q_complete_func "" "" "" ""
        ;;
      greyscale_step)
        __q_complete_func "" "" "" ""
        ;;
      rgb_to_xterm)
        __q_complete_func "" "" "" ""
        ;;
      hue_diff)
        __q_complete_func "" "" "" ""
        ;;
      brightness)
        __q_complete_func "" "" "" ""
        ;;
      contrast)
        __q_complete_func "" "" "" ""
        ;;
      xterm_to_rgb)
        __q_complete_func "" "" "" ""
        ;;
      xterm_to_fg)
        __q_complete_func "" "" "" ""
        ;;
      xterm_to_bg)
        __q_complete_func "" "" "" ""
        ;;
      tfmt)
        __q_complete_func "" "" "" ""
        ;;
      color)
        __q_complete_func "" "" "" ""
        ;;
      shades)
        __q_complete_func "" "" "" ""
        ;;
      colors)
        __q_complete_func "" "" "" ""
        ;;
      esac
      ;;
    esac
    ;;
  esac
}

complete -F __q_compgen q

fi
